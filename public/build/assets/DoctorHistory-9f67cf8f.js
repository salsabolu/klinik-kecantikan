import{o as l,c as d,d as t,h as x,t as n,r as N,m as C,k as v,w as c,a as h,b as u,i as A,l as _,f as g,g as p,v as f,e as b,F as S,E as M,n as D,H as y}from"./app-807f60dc.js";import{A as H}from"./AppLayout-422bcc0a.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhFlask.vue-b6585dea.js";import"./PhSignOut.vue-98dc8f64.js";import"./_plugin-vue_export-helper-c27b6911.js";const P={class:"flex items-end space-x-2"},U={type:"submit",class:"btn btn-primary"},E=t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),O={__name:"FilterButtons",props:{filterLabel:{type:String,default:"Filter"},resetLabel:{type:String,default:"Reset"}},emits:["reset"],setup(r){return(i,o)=>(l(),d("div",P,[t("button",U,[E,x(" "+n(r.filterLabel),1)]),t("button",{onClick:o[0]||(o[0]=k=>i.$emit("reset")),type:"button",class:"btn btn-ghost"},n(r.resetLabel),1)]))}},J={class:"py-12"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},G={class:"p-6 text-gray-900"},K={class:"flex justify-between items-center mb-6"},Q=t("div",null,[t("h2",{class:"text-2xl font-semibold text-gray-900"},"Riwayat Reservasi"),t("p",{class:"text-gray-600 mt-1"},"Lihat riwayat pasien dan reservasi Anda")],-1),X={class:"flex space-x-2"},Y=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Z={class:"bg-gray-50 p-4 rounded-lg mb-6"},tt=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Cari Pasien ",-1),et=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Tanggal Mulai ",-1),st=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Tanggal Selesai ",-1),at={key:0,class:"flex justify-between items-center mb-4"},nt={class:"text-sm text-gray-600"},ot={class:"text-sm text-gray-600"},rt={key:1,class:"overflow-x-auto"},lt={class:"table table-zebra w-full"},it=t("thead",null,[t("tr",null,[t("th",null,"Tanggal & Waktu"),t("th",null,"Pasien"),t("th",null,"Layanan"),t("th",null,"Status"),t("th",null,"Catatan"),t("th",null,"Aksi")])],-1),dt=["onClick"],ct={class:"text-sm"},ut={class:"font-medium"},mt={class:"text-gray-500"},ht={class:"font-medium"},_t={class:"text-sm text-gray-500"},vt={class:"text-sm"},gt={class:"font-medium"},pt={class:"text-gray-500"},ft={class:"text-sm text-gray-600 max-w-xs truncate"},bt={class:"flex space-x-2"},yt=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),xt=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),kt={key:2,class:"text-center py-12"},wt=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),Ct=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tidak ada riwayat reservasi",-1),St={class:"mt-1 text-sm text-gray-500"},Mt={key:3,class:"mt-6"},Dt={class:"flex justify-center"},jt={class:"join"},zt={__name:"DoctorHistory",props:{reservations:Object,filters:Object},setup(r){const i=r,o=N({patient_search:i.filters.patient_search||"",start_date:i.filters.start_date||"",end_date:i.filters.end_date||""}),k=C(()=>o.value.patient_search||o.value.start_date||o.value.end_date),j=C(()=>{const s=[],a=i.reservations.current_page,e=i.reservations.last_page;a>3&&s.push(1),a>4&&s.push("...");for(let m=Math.max(1,a-2);m<=Math.min(e,a+2);m++)s.push(m);return a<e-3&&s.push("..."),a<e-2&&s.push(e),s}),T=s=>new Date(s).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),w=s=>new Date(`2000-01-01 ${s}`).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),B=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(s),L=s=>({pending:"badge-warning",confirmed:"badge-info",completed:"badge-success",cancelled:"badge-error"})[s]||"badge-ghost",V=s=>({pending:"Pending",confirmed:"Dikonfirmasi",completed:"Selesai",cancelled:"Dibatalkan"})[s]||s,R=()=>i.reservations.data.filter(s=>s.status==="completed").length,F=s=>{y.get(route("reservations.show.doctor",s))},$=()=>{y.get(route("doctor.history"),o.value,{preserveState:!0,preserveScroll:!0})},z=()=>{o.value={patient_search:"",start_date:"",end_date:""},y.get(route("doctor.history"),{},{preserveState:!0,preserveScroll:!0})},I=s=>{if(s==="...")return"#";const a={...o.value,page:s};return route("doctor.history",a)};return(s,a)=>(l(),v(H,null,{default:c(()=>[h(u(A),{title:"Riwayat Reservasi"}),t("div",J,[t("div",W,[t("div",q,[t("div",G,[t("div",K,[Q,t("div",X,[h(u(_),{href:s.route("doctor.schedule"),class:"btn btn-primary"},{default:c(()=>[Y,x(" Jadwal Hari Ini ")]),_:1},8,["href"])])]),t("div",Z,[t("form",{onSubmit:g($,["prevent"]),class:"grid grid-cols-1 md:grid-cols-4 gap-4"},[t("div",null,[tt,p(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.patient_search=e),type:"text",placeholder:"Nama atau nomor telepon...",class:"input input-bordered w-full"},null,512),[[f,o.value.patient_search]])]),t("div",null,[et,p(t("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.start_date=e),type:"date",class:"input input-bordered w-full"},null,512),[[f,o.value.start_date]])]),t("div",null,[st,p(t("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.end_date=e),type:"date",class:"input input-bordered w-full"},null,512),[[f,o.value.end_date]])]),h(O,{onReset:z})],32)]),r.reservations.data.length>0?(l(),d("div",at,[t("p",nt," Menampilkan "+n(r.reservations.from)+"-"+n(r.reservations.to)+" dari "+n(r.reservations.total)+" reservasi ",1),t("div",ot," Total: "+n(r.reservations.total)+" | Selesai: "+n(R()),1)])):b("",!0),r.reservations.data.length>0?(l(),d("div",rt,[t("table",lt,[it,t("tbody",null,[(l(!0),d(S,null,M(r.reservations.data,e=>(l(),d("tr",{key:e.id,class:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:m=>F(e.id)},[t("td",null,[t("div",ct,[t("div",ut,n(T(e.tanggal_reservasi)),1),t("div",mt,n(w(e.waktu_mulai))+" - "+n(w(e.waktu_selesai)),1)])]),t("td",null,[t("div",null,[t("div",ht,n(e.patient.nama_lengkap),1),t("div",_t,n(e.patient.nomor_telepon),1)])]),t("td",null,[t("div",vt,[t("div",gt,n(e.service.nama_layanan),1),t("div",pt,n(B(e.service.harga)),1)])]),t("td",null,[t("div",{class:D(["badge",L(e.status)])},n(V(e.status)),3)]),t("td",null,[t("div",ft,n(e.catatan||"-"),1)]),t("td",null,[t("div",bt,[h(u(_),{href:s.route("reservations.show.doctor",e.id),class:"btn btn-sm btn-ghost",title:"Lihat Detail",onClick:a[3]||(a[3]=g(()=>{},["stop"]))},{default:c(()=>[yt]),_:2},1032,["href"]),e.status==="completed"?(l(),v(u(_),{key:0,href:s.route("medical-records.create",{reservation_id:e.id}),class:"btn btn-sm btn-ghost",title:"Buat Rekam Medis",onClick:a[4]||(a[4]=g(()=>{},["stop"]))},{default:c(()=>[xt]),_:2},1032,["href"])):b("",!0)])])],8,dt))),128))])])])):(l(),d("div",kt,[wt,Ct,t("p",St,n(k.value?"Tidak ada reservasi yang sesuai dengan filter yang dipilih.":"Anda belum memiliki riwayat reservasi."),1)])),r.reservations.data.length>0&&r.reservations.last_page>1?(l(),d("div",Mt,[t("div",Dt,[t("div",jt,[(l(!0),d(S,null,M(j.value,e=>(l(),v(u(_),{key:e,href:I(e),class:D(["join-item btn",{"btn-active":e===r.reservations.current_page}])},{default:c(()=>[x(n(e),1)]),_:2},1032,["href","class"]))),128))])])])):b("",!0)])])])])]),_:1}))}};export{zt as default};
