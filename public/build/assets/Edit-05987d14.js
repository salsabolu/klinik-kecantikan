import{u as B,K as P,r as $,m as f,o as i,c as d,a as p,b as t,w as N,F as A,i as U,d as s,h as k,f as G,t as u,g as b,v as g,n as c,e as v,l as R}from"./app-807f60dc.js";import{_ as T}from"./SimpleLayout-91b6f32c.js";import{G as j}from"./PhArrowLeft.vue-872f8b85.js";import{F as H}from"./PhSignOut.vue-98dc8f64.js";import{G as O}from"./PhWarning.vue-0291b903.js";const J={class:"w-full mx-auto space-y-6"},Y={class:"flex items-center justify-between"},q=s("div",null,[s("h1",{class:"text-3xl font-semibold"},"Edit Produk"),s("p",{class:"text-gray-600"},"Perbarui informasi produk")],-1),L={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Q={class:"space-y-6"},W={class:"form-control w-full"},X={class:"label"},Z=s("span",{class:"label-text"},[k("Nama Produk "),s("span",{class:"text-red-500"},"*")],-1),ss={class:"label-text-alt"},es={key:0,class:"label"},ts={class:"label-text-alt text-red-500"},as={key:1,class:"label"},os=s("span",{class:"label-text-alt text-red-500"},"Nama produk tidak boleh lebih dari 255 karakter",-1),ls=[os],rs={class:"form-control w-full"},ns={class:"label"},is=s("span",{class:"label-text"},"Deskripsi",-1),ds={key:0,class:"label"},us={class:"label-text-alt text-red-500"},ps={key:1,class:"label"},cs=s("span",{class:"label-text-alt text-red-500"},"Deskripsi tidak boleh lebih dari 1000 karakter",-1),ks=[cs],ms={class:"form-control w-full"},_s=s("label",{class:"label"},[s("span",{class:"label-text"},[k("Harga "),s("span",{class:"text-red-500"},"*")])],-1),hs={class:"join w-full"},bs=s("span",{class:"join-item btn btn-disabled"},"Rp",-1),gs={key:0,class:"label"},vs={class:"label-text-alt text-red-500"},fs={key:1,class:"label"},xs={class:"label-text-alt"},ys={class:"form-control w-full"},ws=s("label",{class:"label"},[s("span",{class:"label-text"},[k("Stok "),s("span",{class:"text-red-500"},"*")])],-1),Cs={key:0,class:"label"},Ss={class:"label-text-alt text-red-500"},Vs={class:"card-actions justify-end mt-6"},Fs=["disabled"],$s={key:0,class:"modal modal-open"},Ns={class:"modal-box"},js={class:"flex items-start gap-2"},Ds=s("p",{class:"text-lg font-semibold mb-4"}," Konfirmasi Perubahan ",-1),Es=s("p",{class:"mt-4"}," Anda telah melakukan perubahan pada form ini. Jika Anda keluar sekarang, semua perubahan akan hilang. ",-1),Is=s("p",{class:"mt-4"}," Apakah Anda yakin ingin meninggalkan halaman ini tanpa menyimpan? ",-1),Ks={class:"modal-action"},Us={__name:"Edit",props:{product:Object,errors:Object},setup(D){var w,C,S,V;const n=D,e=B({nama_produk:((w=n.product)==null?void 0:w.nama_produk)||"",deskripsi:((C=n.product)==null?void 0:C.deskripsi)||"",harga:((S=n.product)==null?void 0:S.harga)||"",stok:((V=n.product)==null?void 0:V.stok)||""});P(()=>n.product,o=>{o&&(e.nama_produk=o.nama_produk||"",e.deskripsi=o.deskripsi||"",e.harga=o.harga||"",e.stok=o.stok||"")},{immediate:!0});const l=$({}),m=$(!1),_=f(()=>{var o,a,r,F;return{nama_produk:((o=n.product)==null?void 0:o.nama_produk)||"",deskripsi:((a=n.product)==null?void 0:a.deskripsi)||"",harga:((r=n.product)==null?void 0:r.harga)||"",stok:((F=n.product)==null?void 0:F.stok)||""}}),x=f(()=>n.product?String(e.nama_produk||"")!==String(_.value.nama_produk||"")||String(e.deskripsi||"")!==String(_.value.deskripsi||"")||String(e.harga||"")!==String(_.value.harga||"")||String(e.stok||"")!==String(_.value.stok||""):!1),E=f(()=>!e.nama_produk||(e.nama_produk||"").length>255||(e.deskripsi||"").length>1e3||!e.harga||e.harga<=0||e.stok===""||e.stok<0),h=o=>{l.value[o]&&delete l.value[o]},y=o=>{(o.key==="-"||o.key==="e"||o.key==="E")&&o.preventDefault()},I=o=>o?`Rp ${new Intl.NumberFormat("id-ID").format(o)}`:"Rp 0",K=()=>{x.value?m.value=!0:window.location.href="/products"},M=()=>{x.value?m.value=!0:window.location.href="/products"},z=()=>{var o;if(!((o=n.product)!=null&&o.id)){console.error("Product ID not found");return}e.put(`/products/${n.product.id}`,{onSuccess:()=>{console.log("Form submission successful")},onError:a=>{console.error("Form submission failed:",a),l.value=a}})};return(o,a)=>(i(),d(A,null,[p(t(U),{title:"Edit Produk"}),p(T,null,{default:N(()=>[s("div",J,[s("div",Y,[q,s("button",{onClick:K,type:"button",class:"btn btn-outline"},[p(t(j),{size:20,color:"black",weight:"regular"}),k(" Kembali ")])]),s("div",L,[s("form",{onSubmit:G(z,["prevent"]),class:"p-6 lg:p-8"},[s("div",Q,[s("div",W,[s("label",X,[Z,s("span",ss,u((t(e).nama_produk||"").length)+"/255",1)]),b(s("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=r=>t(e).nama_produk=r),class:c(["input input-bordered w-full",{"input-error":l.value.nama_produk||(t(e).nama_produk||"").length>255}]),placeholder:"Masukkan nama produk...",maxlength:"255",onInput:a[1]||(a[1]=r=>h("nama_produk"))},null,34),[[g,t(e).nama_produk]]),l.value.nama_produk?(i(),d("div",es,[s("span",ts,u(l.value.nama_produk),1)])):(t(e).nama_produk||"").length>255?(i(),d("div",as,ls)):v("",!0)]),s("div",rs,[s("label",ns,[is,s("span",{class:c(["label-text-alt",{"text-red-500":(t(e).deskripsi||"").length>1e3}])},u((t(e).deskripsi||"").length)+"/1000 ",3)]),b(s("textarea",{"onUpdate:modelValue":a[2]||(a[2]=r=>t(e).deskripsi=r),class:c(["textarea textarea-bordered w-full h-32",{"textarea-error":l.value.deskripsi||(t(e).deskripsi||"").length>1e3}]),placeholder:"Masukkan deskripsi produk...",maxlength:"1000",onInput:a[3]||(a[3]=r=>h("deskripsi"))},null,34),[[g,t(e).deskripsi]]),l.value.deskripsi?(i(),d("div",ds,[s("span",us,u(l.value.deskripsi),1)])):(t(e).deskripsi||"").length>1e3?(i(),d("div",ps,ks)):v("",!0)]),s("div",ms,[_s,s("div",hs,[bs,b(s("input",{type:"number","onUpdate:modelValue":a[4]||(a[4]=r=>t(e).harga=r),class:c(["input input-bordered join-item flex-1",{"input-error":l.value.harga}]),placeholder:"0",min:"0",step:"1000",onInput:a[5]||(a[5]=r=>h("harga")),onKeypress:y},null,34),[[g,t(e).harga]])]),l.value.harga?(i(),d("div",gs,[s("span",vs,u(l.value.harga),1)])):(i(),d("div",fs,[s("span",xs,u(I(t(e).harga)),1)]))]),s("div",ys,[ws,b(s("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=r=>t(e).stok=r),class:c(["input input-bordered w-full",{"input-error":l.value.stok}]),placeholder:"0",min:"0",onInput:a[7]||(a[7]=r=>h("stok")),onKeypress:y},null,34),[[g,t(e).stok]]),l.value.stok?(i(),d("div",Cs,[s("span",Ss,u(l.value.stok),1)])):v("",!0)])]),s("div",Vs,[s("button",{type:"button",onClick:M,class:"btn btn-outline"}," Batal "),s("button",{type:"submit",class:c(["btn btn-primary",{loading:t(e).processing}]),disabled:t(e).processing||E.value},u(t(e).processing?"Menyimpan...":"Perbarui Produk"),11,Fs)])],32)])]),m.value?(i(),d("div",$s,[s("div",Ns,[s("div",js,[p(t(O),{size:30,color:"currentColor",weight:"regular"}),Ds]),Es,Is,s("div",Ks,[s("button",{onClick:a[8]||(a[8]=r=>m.value=!1),class:"btn btn-outline"},[p(t(j),{size:20,color:"currentColor",weight:"regular"}),k(" Tetap di Halaman ")]),p(t(R),{href:"/products",class:"btn btn-error"},{default:N(()=>[p(t(H),{size:20,color:"currentColor",weight:"regular"}),k(" Ya, Keluar ")]),_:1})])])])):v("",!0)]),_:1})],64))}};export{Us as default};
