import{i as _e,l as ge,u as be,r as w,m as G,B as ke,G as I,o as i,k as fe,w as K,H as ve,a as J,d as e,t as c,h as u,c as d,e as v,f as pe,g as y,p as re,n as N,E as B,F as S,v as C}from"./app-807f60dc.js";import{_ as ye}from"./SimpleLayout-91b6f32c.js";import{_ as xe}from"./_plugin-vue_export-helper-c27b6911.js";const we={components:{Head:_e,Link:ge,SimpleLayout:ye},props:{medicalRecord:Object,patients:Array,errors:Object},setup(l){var Y,X,Q,W,Z,$,ee,te,ae,ne,se,oe,le,ie;const o=s=>s?new Date(s).toISOString().split("T")[0]:"",n=be({patient_id:((Y=l.medicalRecord)==null?void 0:Y.patient_id)||"",tanggal_pemeriksaan:o((X=l.medicalRecord)==null?void 0:X.tanggal_pemeriksaan)||"",diagnosa:((Q=l.medicalRecord)==null?void 0:Q.diagnosa)||"",tindakan:((W=l.medicalRecord)==null?void 0:W.tindakan)||"",catatan:((Z=l.medicalRecord)==null?void 0:Z.catatan)||"",allergies:(($=l.medicalRecord)==null?void 0:$.allergies)||[],medications:((ee=l.medicalRecord)==null?void 0:ee.medications)||[]}),t=w(null),E=w(!1),q=w(!1),M=w(!1),b=w(null),k=w([]),D=w(null),x=w([]),p={patient_id:((te=l.medicalRecord)==null?void 0:te.patient_id)||"",tanggal_pemeriksaan:o((ae=l.medicalRecord)==null?void 0:ae.tanggal_pemeriksaan)||"",diagnosa:((ne=l.medicalRecord)==null?void 0:ne.diagnosa)||"",tindakan:((se=l.medicalRecord)==null?void 0:se.tindakan)||"",catatan:((oe=l.medicalRecord)==null?void 0:oe.catatan)||"",allergies:((le=l.medicalRecord)==null?void 0:le.allergies)||[],medications:((ie=l.medicalRecord)==null?void 0:ie.medications)||[]},R=G(()=>n.patient_id!==p.patient_id||n.tanggal_pemeriksaan!==p.tanggal_pemeriksaan||n.diagnosa!==p.diagnosa||n.tindakan!==p.tindakan||n.catatan!==p.catatan||JSON.stringify(n.allergies)!==JSON.stringify(p.allergies)||JSON.stringify(n.medications)!==JSON.stringify(p.medications)||k.value.length>0||x.value.length>0),F=G(()=>new Date().toISOString().split("T")[0]),A=()=>{if(l.patients&&n.patient_id){const s=l.patients.find(h=>h.id==n.patient_id);t.value=s}},T=s=>{if(!s)return 0;const h=new Date,m=new Date(s);let r=h.getFullYear()-m.getFullYear();const g=h.getMonth()-m.getMonth();return(g<0||g===0&&h.getDate()<m.getDate())&&r--,r},V=s=>s?new Date(s).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Loading...",j=s=>s?new Date(s).toLocaleString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Loading...",P=s=>{const h=Array.from(s.target.files),m=[],r=5*1024*1024;h.forEach(g=>{if(g.size>r){alert(`File ${g.name} terlalu besar. Maksimal 5MB per file.`);return}if(!["application/pdf","image/jpeg","image/jpg","image/png","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(g.type)){alert(`File ${g.name} tidak didukung. Gunakan format PDF, JPG, PNG, DOC, atau DOCX.`);return}const ue={file:g,type:""};m.push(ue)}),k.value=[...k.value,...m],D.value&&(D.value.value="")},L=s=>{k.value.splice(s,1)},O=s=>{if(s===0)return"0 Bytes";const h=1024,m=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(s)/Math.log(h));return parseFloat((s/Math.pow(h,r)).toFixed(2))+" "+m[r]},H=s=>{b.value=s,M.value=!0},U=async()=>{var s,h,m;if(b.value){x.value.push(b.value);try{const r=await window.axios.delete(`/api/attachments/${b.value}`,{headers:{"X-CSRF-TOKEN":(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"),Accept:"application/json","Content-Type":"application/json"},withCredentials:!0});if(r.data.success){if((h=l.medicalRecord)!=null&&h.attachments){const g=l.medicalRecord.attachments.findIndex(de=>de.id===b.value);g>-1&&l.medicalRecord.attachments.splice(g,1)}M.value=!1,b.value=null}else throw new Error(r.data.message||"Failed to delete attachment")}catch(r){if(console.error("Error deleting attachment:",r),r.response){const g=((m=r.response.data)==null?void 0:m.message)||"Gagal menghapus lampiran. Silakan coba lagi.";alert(`Error: ${g}`)}else r.request?alert("Gagal terhubung ke server. Periksa koneksi internet Anda."):alert("Gagal menghapus lampiran. Silakan coba lagi.")}finally{const r=x.value.indexOf(b.value);r>-1&&x.value.splice(r,1),M.value=!1,b.value=null}}},z=()=>{n.allergies.push({name:""})},a=s=>{n.allergies.splice(s,1)},f=()=>{n.medications.push({name:"",dosage:"",frequency:""})},_=s=>{n.medications.splice(s,1)},ce=()=>{var h;if(!((h=l.medicalRecord)!=null&&h.id))return;for(let m=0;m<k.value.length;m++){const r=k.value[m];if(!r.type){alert(`Mohon pilih tipe dokumen untuk file "${r.file.name}"`);return}}const s=new FormData;s.append("_method","PUT"),s.append("patient_id",n.patient_id),s.append("tanggal_pemeriksaan",n.tanggal_pemeriksaan),s.append("diagnosa",n.diagnosa),s.append("tindakan",n.tindakan),s.append("catatan",n.catatan||""),s.append("allergies",JSON.stringify(n.allergies)),s.append("medications",JSON.stringify(n.medications)),k.value.forEach((m,r)=>{s.append(`attachments[${r}]`,m.file),s.append(`attachment_types[${r}]`,m.type)}),ve.post(route("medical-records.update",l.medicalRecord.id),s,{forceFormData:!0,onSuccess:()=>{k.value=[]},onError:m=>{console.error("Validation errors:",m)}})},me=()=>{var s;R.value?E.value=!0:window.location.href=route("medical-records.show",(s=l.medicalRecord)==null?void 0:s.id)},he=()=>{var s;R.value?q.value=!0:window.location.href=route("medical-records.show",(s=l.medicalRecord)==null?void 0:s.id)};return ke(()=>{A()}),{form:n,selectedPatient:t,showBackModal:E,showCancelModal:q,showDeleteAttachmentModal:M,attachmentToDelete:b,selectedFiles:k,fileInput:D,deletingAttachments:x,today:F,isDirty:R,updateSelectedPatient:A,handleFileSelect:P,removeFile:L,formatFileSize:O,deleteAttachment:H,confirmDeleteAttachment:U,addAllergy:z,removeAllergy:a,addMedication:f,removeMedication:_,calculateAge:T,formatDate:V,formatDateTime:j,submit:ce,handleBackClick:me,handleCancelClick:he,processing:G(()=>n.processing)}}},Ce={class:"py-12"},Me={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},De={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Re={class:"p-6 text-gray-900"},Ae={class:"flex justify-between items-center mb-6"},Be={class:"text-2xl font-semibold"},Se=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Fe={key:0,class:"modal modal-open"},Te={class:"modal-box"},Ve=e("h3",{class:"font-bold text-lg mb-4"},"Konfirmasi Kembali",-1),je=e("p",{class:"mb-6"},"Apakah Anda yakin ingin kembali? Perubahan yang belum disimpan akan hilang.",-1),Pe={class:"modal-action"},Le={key:1,class:"alert alert-info mb-6"},Oe=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),He={class:"font-bold"},Ue={class:"text-xs"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ne={class:"form-control"},Ee=e("label",{class:"label"},[e("span",{class:"label-text"},[u("Pasien "),e("span",{class:"text-red-500"},"*")])],-1),qe=e("option",{value:""},"Pilih Pasien",-1),Ge=["value"],Ie={key:0,class:"label"},Ke={class:"label-text-alt text-red-500"},Je={class:"form-control"},Ye=e("label",{class:"label"},[e("span",{class:"label-text"},[u("Tanggal Pemeriksaan "),e("span",{class:"text-red-500"},"*")])],-1),Xe=["max"],Qe={key:0,class:"label"},We={class:"label-text-alt text-red-500"},Ze={class:"form-control"},$e=e("label",{class:"label"},[e("span",{class:"label-text"},[u("Diagnosa "),e("span",{class:"text-red-500"},"*")])],-1),et={class:"label"},tt={class:"label-text-alt"},at={key:0,class:"label-text-alt text-red-500"},nt={class:"form-control"},st=e("label",{class:"label"},[e("span",{class:"label-text"},[u("Tindakan "),e("span",{class:"text-red-500"},"*")])],-1),ot={class:"label"},lt={class:"label-text-alt"},it={key:0,class:"label-text-alt text-red-500"},dt={class:"form-control"},rt=e("label",{class:"label"},[e("span",{class:"label-text"},"Catatan Tambahan")],-1),ct={class:"label"},mt={class:"label-text-alt"},ht={class:"card bg-base-100 shadow-md"},ut={class:"card-body"},_t=e("h3",{class:"card-title mb-4"},"Riwayat Alergi dan Obat-Obatan",-1),gt={class:"mb-6"},bt={class:"flex justify-between items-center mb-2"},kt=e("label",{class:"label-text font-semibold"},"Riwayat Alergi",-1),ft=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),vt={key:0,class:"text-gray-500 text-sm italic p-4 bg-gray-50 rounded"},pt={key:1,class:"space-y-2"},yt=["onUpdate:modelValue"],xt=["onClick"],wt=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ct=[wt],Mt={class:"flex justify-between items-center mb-2"},Dt=e("label",{class:"label-text font-semibold"},"Riwayat Obat-Obatan",-1),Rt=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),At={key:0,class:"text-gray-500 text-sm italic p-4 bg-gray-50 rounded"},Bt={key:1,class:"space-y-2"},St=["onUpdate:modelValue"],Ft=["onUpdate:modelValue"],Tt=["onUpdate:modelValue"],Vt=["onClick"],jt=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Pt=[jt],Lt={class:"card bg-base-100 shadow-md"},Ot={class:"card-body"},Ht=e("h3",{class:"card-title"},"Informasi Asli",-1),Ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},zt=e("span",{class:"font-medium"},"Tanggal Pemeriksaan:",-1),Nt=e("br",null,null,-1),Et=e("span",{class:"font-medium"},"Dibuat oleh:",-1),qt=e("br",null,null,-1),Gt=e("span",{class:"font-medium"},"Dibuat pada:",-1),It=e("br",null,null,-1),Kt=e("span",{class:"font-medium"},"Terakhir diperbarui:",-1),Jt=e("br",null,null,-1),Yt={key:0,class:"card bg-base-100 shadow-md"},Xt={class:"card-body"},Qt=e("h3",{class:"card-title"},"Lampiran yang Ada",-1),Wt={class:"space-y-3"},Zt={class:"flex items-center"},$t=e("svg",{class:"w-6 h-6 text-blue-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),ea={class:"font-medium"},ta={class:"text-sm text-gray-500"},aa={class:"flex space-x-2"},na=["href"],sa=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),oa=["href"],la=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),ia=["onClick","disabled"],da=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),ra={class:"card bg-base-100 shadow-md"},ca={class:"card-body"},ma=e("h3",{class:"card-title"},"Tambah Lampiran Baru",-1),ha={class:"space-y-4"},ua={class:"form-control"},_a=e("label",{class:"label"},[e("span",{class:"label-text"},"Tambah Lampiran")],-1),ga=e("div",{class:"label"},[e("span",{class:"label-text-alt text-gray-500"}," Format yang didukung: PDF, JPG, PNG, DOC, DOCX. Maksimal 5MB per file. ")],-1),ba={key:0,class:"space-y-3"},ka=e("h4",{class:"font-medium"},"File yang akan diunggah:",-1),fa={class:"flex items-center justify-between mb-3"},va={class:"flex items-center"},pa=e("svg",{class:"w-6 h-6 text-blue-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),ya={class:"font-medium"},xa={class:"text-sm text-gray-500"},wa=["onClick"],Ca=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ma=[Ca],Da={class:"form-control"},Ra=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Tipe Dokumen")],-1),Aa=["onUpdate:modelValue"],Ba=e("option",{value:""},"Pilih Tipe",-1),Sa=e("option",{value:"foto_sebelum"},"Foto Sebelum Treatment",-1),Fa=e("option",{value:"foto_sesudah"},"Foto Sesudah Treatment",-1),Ta=e("option",{value:"hasil_lab"},"Hasil Lab/Tes",-1),Va=e("option",{value:"lainnya"},"Lainnya",-1),ja=[Ba,Sa,Fa,Ta,Va],Pa={class:"flex justify-end space-x-4"},La=["disabled"],Oa={key:0,class:"loading loading-spinner loading-sm"},Ha={key:2,class:"modal modal-open"},Ua={class:"modal-box"},za=e("h3",{class:"font-bold text-lg mb-4"},"Konfirmasi Pembatalan",-1),Na=e("p",{class:"mb-6"},"Apakah Anda yakin ingin membatalkan perubahan? Data yang telah diubah akan hilang.",-1),Ea={class:"modal-action"},qa={key:3,class:"modal modal-open"},Ga={class:"modal-box"},Ia=e("h3",{class:"font-bold text-lg mb-4"},"Konfirmasi Hapus Lampiran",-1),Ka=e("p",{class:"mb-6"},"Apakah Anda yakin ingin menghapus lampiran ini? Tindakan ini tidak dapat dibatalkan.",-1),Ja={class:"modal-action"};function Ya(l,o,n,t,E,q){const M=I("Head"),b=I("Link"),k=I("SimpleLayout");return i(),fe(k,null,{default:K(()=>{var D,x,p,R,F,A,T,V,j,P,L,O,H,U,z;return[J(M,{title:"Edit Rekam Medis"}),e("div",Ce,[e("div",Me,[e("div",De,[e("div",Re,[e("div",Ae,[e("h2",Be,"Edit Rekam Medis #"+c(((D=n.medicalRecord)==null?void 0:D.id)||"Loading..."),1),e("button",{type:"button",onClick:o[0]||(o[0]=(...a)=>t.handleBackClick&&t.handleBackClick(...a)),class:"btn btn-outline"},[Se,u(" Kembali ")])]),t.showBackModal?(i(),d("div",Fe,[e("div",Te,[Ve,je,e("div",Pe,[e("button",{type:"button",onClick:o[1]||(o[1]=a=>t.showBackModal=!1),class:"btn btn-outline"},"Tidak"),J(b,{href:(x=n.medicalRecord)!=null&&x.id?l.route("medical-records.show",n.medicalRecord.id):"#",class:"btn btn-error"},{default:K(()=>[u("Ya, Kembali")]),_:1},8,["href"])])])])):v("",!0),t.selectedPatient?(i(),d("div",Le,[Oe,e("div",null,[e("h3",He,c(((p=t.selectedPatient)==null?void 0:p.nama_lengkap)||"Loading..."),1),e("div",Ue,c(((R=t.selectedPatient)==null?void 0:R.jenis_kelamin)||"")+" | "+c(t.calculateAge((F=t.selectedPatient)==null?void 0:F.tanggal_lahir))+" tahun | "+c(((A=t.selectedPatient)==null?void 0:A.nomor_telepon)||""),1)])])):v("",!0),e("form",{onSubmit:o[12]||(o[12]=pe((...a)=>t.submit&&t.submit(...a),["prevent"])),class:"space-y-6"},[e("div",ze,[e("div",Ne,[Ee,y(e("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>t.form.patient_id=a),class:N(["select select-bordered",{"select-error":(T=n.errors)==null?void 0:T.patient_id}]),onChange:o[3]||(o[3]=(...a)=>t.updateSelectedPatient&&t.updateSelectedPatient(...a)),required:""},[qe,(i(!0),d(S,null,B(n.patients,a=>(i(),d("option",{key:a.id,value:a.id},c(a.nama_lengkap)+" - "+c(a.nomor_telepon),9,Ge))),128))],34),[[re,t.form.patient_id]]),(V=n.errors)!=null&&V.patient_id?(i(),d("div",Ie,[e("span",Ke,c(n.errors.patient_id),1)])):v("",!0)]),e("div",Je,[Ye,y(e("input",{type:"date","onUpdate:modelValue":o[4]||(o[4]=a=>t.form.tanggal_pemeriksaan=a),class:N(["input input-bordered",{"input-error":n.errors.tanggal_pemeriksaan}]),max:t.today,required:""},null,10,Xe),[[C,t.form.tanggal_pemeriksaan]]),n.errors.tanggal_pemeriksaan?(i(),d("div",Qe,[e("span",We,c(n.errors.tanggal_pemeriksaan),1)])):v("",!0)])]),e("div",Ze,[$e,y(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=a=>t.form.diagnosa=a),class:N(["textarea textarea-bordered h-24",{"textarea-error":n.errors.diagnosa}]),placeholder:"Diagnosa hasil pemeriksaan...",maxlength:"1000",required:""},null,2),[[C,t.form.diagnosa]]),e("div",et,[e("span",tt,c(t.form.diagnosa.length)+"/1000 karakter",1),n.errors.diagnosa?(i(),d("span",at,c(n.errors.diagnosa),1)):v("",!0)])]),e("div",nt,[st,y(e("textarea",{"onUpdate:modelValue":o[6]||(o[6]=a=>t.form.tindakan=a),class:N(["textarea textarea-bordered h-24",{"textarea-error":n.errors.tindakan}]),placeholder:"Tindakan yang dilakukan...",maxlength:"1000",required:""},null,2),[[C,t.form.tindakan]]),e("div",ot,[e("span",lt,c(t.form.tindakan.length)+"/1000 karakter",1),n.errors.tindakan?(i(),d("span",it,c(n.errors.tindakan),1)):v("",!0)])]),e("div",dt,[rt,y(e("textarea",{"onUpdate:modelValue":o[7]||(o[7]=a=>t.form.catatan=a),class:"textarea textarea-bordered h-32",placeholder:"Catatan tambahan, rekomendasi, atau instruksi khusus...",maxlength:"2000"},null,512),[[C,t.form.catatan]]),e("div",ct,[e("span",mt,c(t.form.catatan.length)+"/2000 karakter",1)])]),e("div",ht,[e("div",ut,[_t,e("div",gt,[e("div",bt,[kt,e("button",{type:"button",onClick:o[8]||(o[8]=(...a)=>t.addAllergy&&t.addAllergy(...a)),class:"btn btn-sm btn-outline btn-primary"},[ft,u(" Tambah Alergi ")])]),t.form.allergies.length===0?(i(),d("div",vt," Belum ada riwayat alergi yang ditambahkan ")):(i(),d("div",pt,[(i(!0),d(S,null,B(t.form.allergies,(a,f)=>(i(),d("div",{key:f,class:"flex items-center space-x-2"},[y(e("input",{type:"text","onUpdate:modelValue":_=>a.name=_,class:"input input-bordered flex-1",placeholder:"Nama alergi (contoh: Penisilin, Kacang, dll)"},null,8,yt),[[C,a.name]]),e("button",{type:"button",onClick:_=>t.removeAllergy(f),class:"btn btn-sm btn-ghost text-red-500"},Ct,8,xt)]))),128))]))]),e("div",null,[e("div",Mt,[Dt,e("button",{type:"button",onClick:o[9]||(o[9]=(...a)=>t.addMedication&&t.addMedication(...a)),class:"btn btn-sm btn-outline btn-success"},[Rt,u(" Tambah Obat ")])]),t.form.medications.length===0?(i(),d("div",At," Belum ada riwayat obat-obatan yang ditambahkan ")):(i(),d("div",Bt,[(i(!0),d(S,null,B(t.form.medications,(a,f)=>(i(),d("div",{key:f,class:"flex items-center space-x-2"},[y(e("input",{type:"text","onUpdate:modelValue":_=>a.name=_,class:"input input-bordered flex-1",placeholder:"Nama obat"},null,8,St),[[C,a.name]]),y(e("input",{type:"text","onUpdate:modelValue":_=>a.dosage=_,class:"input input-bordered w-32",placeholder:"Dosis"},null,8,Ft),[[C,a.dosage]]),y(e("input",{type:"text","onUpdate:modelValue":_=>a.frequency=_,class:"input input-bordered w-32",placeholder:"Frekuensi"},null,8,Tt),[[C,a.frequency]]),e("button",{type:"button",onClick:_=>t.removeMedication(f),class:"btn btn-sm btn-ghost text-red-500"},Pt,8,Vt)]))),128))]))])])]),e("div",Lt,[e("div",Ot,[Ht,e("div",Ut,[e("div",null,[zt,Nt,u(c(t.formatDate((j=n.medicalRecord)==null?void 0:j.tanggal_pemeriksaan)),1)]),e("div",null,[Et,qt,u(c(((L=(P=n.medicalRecord)==null?void 0:P.user)==null?void 0:L.name)||"Loading..."),1)]),e("div",null,[Gt,It,u(c(t.formatDateTime((O=n.medicalRecord)==null?void 0:O.created_at)),1)]),e("div",null,[Kt,Jt,u(c(t.formatDateTime((H=n.medicalRecord)==null?void 0:H.updated_at)),1)])])])]),(U=n.medicalRecord)!=null&&U.attachments&&n.medicalRecord.attachments.length>0?(i(),d("div",Yt,[e("div",Xt,[Qt,e("div",Wt,[(i(!0),d(S,null,B(n.medicalRecord.attachments,a=>(i(),d("div",{key:a.id,class:"flex items-center justify-between p-3 bg-base-200 rounded-lg"},[e("div",Zt,[$t,e("div",null,[e("div",ea,c(a.filename),1),e("div",ta,c(t.formatFileSize(a.size)),1)])]),e("div",aa,[e("a",{href:l.route("attachments.view",a.id),target:"_blank",class:"btn btn-sm btn-outline btn-primary"},[sa,u(" Lihat ")],8,na),e("a",{href:l.route("attachments.download",a.id),class:"btn btn-sm btn-outline btn-success"},[la,u(" Unduh ")],8,oa),e("button",{type:"button",onClick:f=>t.deleteAttachment(a.id),class:"btn btn-sm btn-outline btn-error",disabled:t.deletingAttachments.includes(a.id)},[da,u(" Hapus ")],8,ia)])]))),128))])])])):v("",!0),e("div",ra,[e("div",ca,[ma,e("div",ha,[e("div",ua,[_a,e("input",{type:"file",ref:"fileInput",onChange:o[10]||(o[10]=(...a)=>t.handleFileSelect&&t.handleFileSelect(...a)),accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",multiple:"",class:"file-input file-input-bordered w-full"},null,544),ga]),t.selectedFiles.length>0?(i(),d("div",ba,[ka,(i(!0),d(S,null,B(t.selectedFiles,(a,f)=>(i(),d("div",{key:f,class:"p-4 bg-base-200 rounded-lg"},[e("div",fa,[e("div",va,[pa,e("div",null,[e("div",ya,c(a.file.name),1),e("div",xa,c(t.formatFileSize(a.file.size)),1)])]),e("button",{type:"button",onClick:_=>t.removeFile(f),class:"btn btn-sm btn-ghost text-red-500 hover:bg-red-100"},Ma,8,wa)]),e("div",Da,[Ra,y(e("select",{"onUpdate:modelValue":_=>a.type=_,class:"select select-bordered select-sm w-full",required:""},ja,8,Aa),[[re,a.type]])])]))),128))])):v("",!0)])])]),e("div",Pa,[e("button",{type:"button",onClick:o[11]||(o[11]=(...a)=>t.handleCancelClick&&t.handleCancelClick(...a)),class:"btn btn-outline"}," Batal "),e("button",{type:"submit",class:"btn btn-primary",disabled:t.processing},[t.processing?(i(),d("span",Oa)):v("",!0),u(" "+c(t.processing?"Menyimpan...":"Simpan Perubahan"),1)],8,La)])],32),t.showCancelModal?(i(),d("div",Ha,[e("div",Ua,[za,Na,e("div",Ea,[e("button",{type:"button",onClick:o[13]||(o[13]=a=>t.showCancelModal=!1),class:"btn btn-outline"},"Tidak"),J(b,{href:(z=n.medicalRecord)!=null&&z.id?l.route("medical-records.show",n.medicalRecord.id):"#",class:"btn btn-error"},{default:K(()=>[u("Ya, Batalkan")]),_:1},8,["href"])])])])):v("",!0),t.showDeleteAttachmentModal?(i(),d("div",qa,[e("div",Ga,[Ia,Ka,e("div",Ja,[e("button",{type:"button",onClick:o[14]||(o[14]=a=>{t.showDeleteAttachmentModal=!1,t.attachmentToDelete=null}),class:"btn btn-outline"},"Tidak"),e("button",{type:"button",onClick:o[15]||(o[15]=(...a)=>t.confirmDeleteAttachment&&t.confirmDeleteAttachment(...a)),class:"btn btn-error"},"Ya, Hapus")])])])):v("",!0)])])])])]}),_:1})}const Za=xe(we,[["render",Ya]]);export{Za as default};
