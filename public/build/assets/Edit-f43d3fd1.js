import{u as B,K as A,r as E,m as k,o,c as d,a as u,b as s,w as N,F as L,i as P,d as a,h as p,f as U,t as c,g as v,v as g,n as _,e as f,l as G}from"./app-807f60dc.js";import{_ as R}from"./SimpleLayout-91b6f32c.js";import{G as S}from"./PhArrowLeft.vue-872f8b85.js";import{F as T}from"./PhSignOut.vue-98dc8f64.js";import{G as H}from"./PhWarning.vue-0291b903.js";const O={class:"w-full mx-auto space-y-6"},J={class:"flex items-center justify-between"},Y=a("div",null,[a("h1",{class:"text-3xl font-semibold"},"Edit Layanan"),a("p",{class:"text-gray-600"},"Perbarui informasi layanan")],-1),q={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Q={class:"space-y-6"},W={class:"form-control w-full"},X={class:"label"},Z=a("span",{class:"label-text"},[p("Nama Layanan "),a("span",{class:"text-red-500"},"*")],-1),aa={class:"label-text-alt"},ea={key:0,class:"label"},sa={class:"label-text-alt text-red-500"},ta={key:1,class:"label"},na=a("span",{class:"label-text-alt text-red-500"},"Nama layanan tidak boleh lebih dari 255 karakter",-1),la=[na],ia={class:"form-control w-full"},ra={class:"label"},oa=a("span",{class:"label-text"},"Deskripsi",-1),da={key:0,class:"label"},ca={class:"label-text-alt text-red-500"},ua={key:1,class:"label"},_a=a("span",{class:"label-text-alt text-red-500"},"Deskripsi tidak boleh lebih dari 1000 karakter",-1),pa=[_a],ma={class:"form-control w-full"},ha=a("label",{class:"label"},[a("span",{class:"label-text"},[p("Harga "),a("span",{class:"text-red-500"},"*")])],-1),ba={class:"join w-full"},va=a("span",{class:"join-item btn btn-disabled"},"Rp",-1),ga={key:0,class:"label"},fa={class:"label-text-alt text-red-500"},ka={key:1,class:"label"},ya={class:"label-text-alt"},xa={class:"form-control w-full"},wa=a("label",{class:"label"},[a("span",{class:"label-text"},[p("Durasi (Menit) "),a("span",{class:"text-red-500"},"*")])],-1),Ca={key:0,class:"label"},Va={class:"label-text-alt text-red-500"},Da=a("div",{class:"label"},[a("span",{class:"label-text-alt"},"Durasi dalam menit (contoh: 30, 60, 90)")],-1),$a={class:"card-actions justify-end mt-6"},Ea=["disabled"],Na={key:0,class:"modal modal-open"},Sa={class:"modal-box"},ja={class:"flex items-start gap-2"},Fa=a("p",{class:"text-lg font-semibold mb-4"}," Konfirmasi Perubahan ",-1),Ia=a("p",{class:"mt-4"}," Anda telah melakukan perubahan pada form ini. Jika Anda keluar sekarang, semua perubahan akan hilang. ",-1),Ma=a("p",{class:"mt-4"}," Apakah Anda yakin ingin meninggalkan halaman ini tanpa menyimpan? ",-1),Ka={class:"modal-action"},Ua={__name:"Edit",props:{service:Object,errors:Object},setup(j){var w,C,V,D;const r=j,e=B({nama_layanan:((w=r.service)==null?void 0:w.nama_layanan)||"",deskripsi:((C=r.service)==null?void 0:C.deskripsi)||"",harga:((V=r.service)==null?void 0:V.harga)||"",durasi_menit:((D=r.service)==null?void 0:D.durasi_menit)||""});A(()=>r.service,t=>{t&&(e.nama_layanan=t.nama_layanan||"",e.deskripsi=t.deskripsi||"",e.harga=t.harga||"",e.durasi_menit=t.durasi_menit||"")},{immediate:!0});const l=E({}),m=E(!1),h=k(()=>{var t,n,i,$;return{nama_layanan:((t=r.service)==null?void 0:t.nama_layanan)||"",deskripsi:((n=r.service)==null?void 0:n.deskripsi)||"",harga:((i=r.service)==null?void 0:i.harga)||"",durasi_menit:(($=r.service)==null?void 0:$.durasi_menit)||""}}),y=k(()=>r.service?String(e.nama_layanan||"")!==String(h.value.nama_layanan||"")||String(e.deskripsi||"")!==String(h.value.deskripsi||"")||String(e.harga||"")!==String(h.value.harga||"")||String(e.durasi_menit||"")!==String(h.value.durasi_menit||""):!1),F=k(()=>!e.nama_layanan||(e.nama_layanan||"").length>255||(e.deskripsi||"").length>1e3||!e.harga||e.harga<=0||!e.durasi_menit||e.durasi_menit<=0),b=t=>{l.value[t]&&delete l.value[t]},x=t=>{(t.key==="-"||t.key==="e"||t.key==="E")&&t.preventDefault()},I=t=>t?`Rp ${new Intl.NumberFormat("id-ID").format(t)}`:"Rp 0",M=()=>{y.value?m.value=!0:window.location.href="/services"},K=()=>{y.value?m.value=!0:window.location.href="/services"},z=()=>{var t;if(!((t=r.service)!=null&&t.id)){console.error("Service ID not found");return}e.put(`/services/${r.service.id}`,{onSuccess:()=>{},onError:n=>{l.value=n}})};return(t,n)=>(o(),d(L,null,[u(s(P),{title:"Edit Layanan"}),u(R,null,{default:N(()=>[a("div",O,[a("div",J,[Y,a("button",{onClick:M,type:"button",class:"btn btn-outline"},[u(s(S),{size:20,color:"currentColor",weight:"regular"}),p(" Kembali ")])]),a("div",q,[a("form",{onSubmit:U(z,["prevent"]),class:"p-6 lg:p-8"},[a("div",Q,[a("div",W,[a("label",X,[Z,a("span",aa,c((s(e).nama_layanan||"").length)+"/255",1)]),v(a("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=i=>s(e).nama_layanan=i),class:_(["input input-bordered w-full",{"input-error":l.value.nama_layanan||(s(e).nama_layanan||"").length>255}]),placeholder:"Masukkan nama layanan",maxlength:"255",onInput:n[1]||(n[1]=i=>b("nama_layanan"))},null,34),[[g,s(e).nama_layanan]]),l.value.nama_layanan?(o(),d("div",ea,[a("span",sa,c(l.value.nama_layanan),1)])):(s(e).nama_layanan||"").length>255?(o(),d("div",ta,la)):f("",!0)]),a("div",ia,[a("label",ra,[oa,a("span",{class:_(["label-text-alt",{"text-red-500":(s(e).deskripsi||"").length>1e3}])},c((s(e).deskripsi||"").length)+"/1000 ",3)]),v(a("textarea",{"onUpdate:modelValue":n[2]||(n[2]=i=>s(e).deskripsi=i),class:_(["textarea textarea-bordered w-full",{"textarea-error":l.value.deskripsi||(s(e).deskripsi||"").length>1e3}]),placeholder:"Masukkan deskripsi layanan",rows:"3",maxlength:"1000",onInput:n[3]||(n[3]=i=>b("deskripsi"))},null,34),[[g,s(e).deskripsi]]),l.value.deskripsi?(o(),d("div",da,[a("span",ca,c(l.value.deskripsi),1)])):(s(e).deskripsi||"").length>1e3?(o(),d("div",ua,pa)):f("",!0)]),a("div",ma,[ha,a("div",ba,[va,v(a("input",{type:"number","onUpdate:modelValue":n[4]||(n[4]=i=>s(e).harga=i),class:_(["input input-bordered join-item flex-1",{"input-error":l.value.harga}]),placeholder:"0",min:"0",step:"1000",onInput:n[5]||(n[5]=i=>b("harga")),onKeypress:x},null,34),[[g,s(e).harga]])]),l.value.harga?(o(),d("div",ga,[a("span",fa,c(l.value.harga),1)])):(o(),d("div",ka,[a("span",ya,c(I(s(e).harga)),1)]))]),a("div",xa,[wa,v(a("input",{type:"number","onUpdate:modelValue":n[6]||(n[6]=i=>s(e).durasi_menit=i),class:_(["input input-bordered w-full",{"input-error":l.value.durasi_menit}]),placeholder:"0",min:"0",step:"15",onInput:n[7]||(n[7]=i=>b("durasi_menit")),onKeypress:x},null,34),[[g,s(e).durasi_menit]]),l.value.durasi_menit?(o(),d("div",Ca,[a("span",Va,c(l.value.durasi_menit),1)])):f("",!0),Da])]),a("div",$a,[a("button",{type:"button",onClick:K,class:"btn btn-outline"}," Batal "),a("button",{type:"submit",class:_(["btn btn-primary",{loading:s(e).processing}]),disabled:s(e).processing||F.value},c(s(e).processing?"Memperbarui...":"Perbarui Layanan"),11,Ea)])],32)])]),m.value?(o(),d("div",Na,[a("div",Sa,[a("div",ja,[u(s(H),{size:30,color:"currentColor",weight:"regular"}),Fa]),Ia,Ma,a("div",Ka,[a("button",{onClick:n[8]||(n[8]=i=>m.value=!1),class:"btn btn-outline"},[u(s(S),{size:20,color:"currentColor",weight:"regular"}),p(" Tetap di Halaman ")]),u(s(G),{href:"/services",class:"btn btn-error"},{default:N(()=>[u(s(T),{size:20,color:"currentColor",weight:"regular"}),p(" Ya, Keluar ")]),_:1})])])])):f("",!0)]),_:1})],64))}};export{Ua as default};
