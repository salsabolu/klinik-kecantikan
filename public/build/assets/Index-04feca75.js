import{s as F,x,m as A,o as s,c as l,y as j,e as g,z as G,d as e,i as I,l as U,A as K,r as R,G as h,k as S,w as Z,H as M,a as _,g as C,v as P,E as z,t as f,f as T,h as V,F as L,n as O}from"./app-807f60dc.js";import{A as q}from"./AppLayout-422bcc0a.js";import{_ as W}from"./ResetFilterButton-97faf3b6.js";import{I as J}from"./PhEye.vue-3a0a261d.js";import{G as Q}from"./PhNotePencil.vue-2f5d6dac.js";import{G as X}from"./PhTrashSimple.vue-94343d88.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhFlask.vue-b6585dea.js";import"./PhSignOut.vue-98dc8f64.js";import"./PhX.vue-bddc74a7.js";const $=["width","height","fill","transform"],ee={key:0},te=e("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212ZM144,96a16,16,0,1,1-16-16A16,16,0,0,1,144,96Zm0,64a16,16,0,1,1-16-16A16,16,0,0,1,144,160Z"},null,-1),oe=[te],ae={key:1},se=e("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),le=e("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm12-88a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm0-44a12,12,0,1,1-12-12A12,12,0,0,1,140,84Zm0,88a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z"},null,-1),ne=[se,le],re={key:2},ie=e("path",{d:"M232,128A104,104,0,1,0,128,232,104.13,104.13,0,0,0,232,128ZM116,84a12,12,0,1,1,12,12A12,12,0,0,1,116,84Zm0,44a12,12,0,1,1,12,12A12,12,0,0,1,116,128Zm0,44a12,12,0,1,1,12,12A12,12,0,0,1,116,172Z"},null,-1),de=[ie],ce={key:3},me=e("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218ZM138,84a10,10,0,1,1-10-10A10,10,0,0,1,138,84Zm0,44a10,10,0,1,1-10-10A10,10,0,0,1,138,128Zm0,44a10,10,0,1,1-10-10A10,10,0,0,1,138,172Z"},null,-1),ue=[me],he={key:4},_e=e("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm12-88a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm0-44a12,12,0,1,1-12-12A12,12,0,0,1,140,84Zm0,88a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z"},null,-1),pe=[_e],fe={key:5},ge=e("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm8-136a8,8,0,1,1-8-8A8,8,0,0,1,136,84Zm0,44a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm0,44a8,8,0,1,1-8-8A8,8,0,0,1,136,172Z"},null,-1),ve=[ge],be={name:"PhDotsThreeCircleVertical"},ke=F({...be,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const o=n,r=x("weight","regular"),a=x("size","1em"),m=x("color","currentColor"),v=x("mirrored",!1),d=A(()=>o.weight??r),b=A(()=>o.size??a),k=A(()=>o.color??m),y=A(()=>o.mirrored!==void 0?o.mirrored?"scale(-1, 1)":void 0:v?"scale(-1, 1)":void 0);return(u,D)=>(s(),l("svg",G({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:k.value,transform:y.value},u.$attrs),[j(u.$slots,"default"),d.value==="bold"?(s(),l("g",ee,oe)):d.value==="duotone"?(s(),l("g",ae,ne)):d.value==="fill"?(s(),l("g",re,de)):d.value==="light"?(s(),l("g",ce,ue)):d.value==="regular"?(s(),l("g",he,pe)):d.value==="thin"?(s(),l("g",fe,ve)):g("",!0)],16,$))}}),ye={components:{Head:I,Link:U,AppLayout:q,ResetFilterButton:W,PhNotePencil:Q,PhTrashSimple:X,PhDotsThreeCircleVertical:ke,PhEye:J},props:{medicalRecords:Object,patients:Array,filters:Object},setup(n){var p,w,B,H;const o=K(),r=R({search:((p=n.filters)==null?void 0:p.search)||"",patient_id:((w=n.filters)==null?void 0:w.patient_id)||"",date_from:((B=n.filters)==null?void 0:B.date_from)||"",date_to:((H=n.filters)==null?void 0:H.date_to)||""}),a=R(!1),m=R(null),v=()=>{M.get(route("medical-records.index"),r.value,{preserveState:!0,preserveScroll:!0})};return{filters:r,showDeleteModal:a,recordToDelete:m,filterRecords:v,clearFilters:()=>{r.value={search:"",patient_id:"",date_from:"",date_to:""},v()},confirmDelete:i=>{m.value=i,a.value=!0},deleteRecord:()=>{M.delete(route("medical-records.destroy",m.value.id),{onSuccess:()=>{a.value=!1,m.value=null}})},canEdit:i=>{const c=o.props.auth.user;return c.role==="admin"||c.role==="dokter"&&i.user_id===c.id},canDelete:i=>{const c=o.props.auth.user;return c.role==="admin"||c.role==="dokter"&&i.user_id===c.id},formatDate:i=>new Date(i).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),getRowNumber:i=>{const c=n.medicalRecords.current_page||1,E=n.medicalRecords.per_page||15;return(c-1)*E+i+1},goToDetail:i=>{M.visit(route("medical-records.show",i))}}}},we={class:"space-y-6"},xe=e("div",null,[e("h1",{class:"text-3xl font-semibold"},"Daftar Rekam Medis"),e("p",{class:"text-gray-600"},"Kelola rekam medis pasien")],-1),Ae={class:"card bg-white shadow-xl"},De={class:"card-body"},Re={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Ze={class:"form-control"},Me=e("label",{class:"label"},[e("span",{class:"label-text"},"Pencarian")],-1),Ce={class:"form-control"},Pe=e("label",{class:"label"},[e("span",{class:"label-text"},"Tanggal Dari")],-1),Te={class:"form-control"},Ve=e("label",{class:"label"},[e("span",{class:"label-text"},"Tanggal Sampai")],-1),Ne={class:"card bg-white shadow-xl"},Be={class:"card-body"},He={class:"overflow-x-auto"},Se={class:"table table-zebra"},ze=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Pasien"),e("th",null,"Tanggal Pemeriksaan"),e("th",null,"Diagnosa"),e("th",null,"Dokter"),e("th",null,"Aksi")])],-1),Le=["onClick"],Ee={class:"font-semibold"},Fe={class:"text-sm text-gray-600"},je=["title"],Ge={class:"text-sm"},Ie={class:"dropdown dropdown-end"},Ue={tabindex:"0",class:"btn btn-circle btn-ghost btn-sm"},Ke={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-white rounded-box w-40"},Oe={key:0},qe={key:1},We=["onClick"],Je=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Qe={key:0,class:"text-center py-12"},Xe=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),Ye=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tidak ada rekam medis",-1),$e=e("p",{class:"mt-1 text-sm text-gray-500"},"Mulai dengan membuat rekam medis baru.",-1),et=[Xe,Ye,$e],tt={key:1,class:"flex justify-center mt-6"},ot={class:"btn-group"},at={key:0,class:"modal modal-open"},st={class:"modal-box"},lt=e("h3",{class:"font-bold text-lg"},"Konfirmasi Hapus",-1),nt=e("p",{class:"py-4"},"Apakah Anda yakin ingin menghapus rekam medis ini? Tindakan ini tidak dapat dibatalkan.",-1),rt={class:"modal-action"};function it(n,o,r,a,m,v){const d=h("Head"),b=h("ResetFilterButton"),k=h("PhDotsThreeCircleVertical"),y=h("PhEye"),u=h("Link"),D=h("PhNotePencil"),N=h("AppLayout");return s(),S(N,null,{default:Z(()=>[_(d,{title:"Daftar Rekam Medis"}),e("div",we,[xe,e("div",Ae,[e("div",De,[e("div",Re,[e("div",Ze,[Me,C(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>a.filters.search=t),placeholder:"Nama pasien...",class:"input input-bordered",onInput:o[1]||(o[1]=(...t)=>a.filterRecords&&a.filterRecords(...t))},null,544),[[P,a.filters.search]])]),e("div",Ce,[Pe,C(e("input",{type:"date","onUpdate:modelValue":o[2]||(o[2]=t=>a.filters.date_from=t),class:"input input-bordered",onChange:o[3]||(o[3]=(...t)=>a.filterRecords&&a.filterRecords(...t))},null,544),[[P,a.filters.date_from]])]),e("div",Te,[Ve,C(e("input",{type:"date","onUpdate:modelValue":o[4]||(o[4]=t=>a.filters.date_to=t),class:"input input-bordered",onChange:o[5]||(o[5]=(...t)=>a.filterRecords&&a.filterRecords(...t))},null,544),[[P,a.filters.date_to]])]),_(b,{onReset:a.clearFilters},null,8,["onReset"])])])]),e("div",Ne,[e("div",Be,[e("div",He,[e("table",Se,[ze,e("tbody",null,[(s(!0),l(L,null,z(r.medicalRecords.data,(t,p)=>(s(),l("tr",{key:t.id,onClick:w=>a.goToDetail(t.id),class:"cursor-pointer hover:bg-base-300 transition-colors"},[e("td",null,f(a.getRowNumber(p)),1),e("td",null,[e("div",Ee,f(t.patient.nama_lengkap),1),e("div",Fe,f(t.patient.nomor_telepon),1)]),e("td",null,f(a.formatDate(t.tanggal_pemeriksaan)),1),e("td",null,[e("div",{class:"text-sm max-w-xs truncate",title:t.diagnosa},f(t.diagnosa),9,je)]),e("td",Ge,f(t.user.name),1),e("td",{onClick:o[7]||(o[7]=T(()=>{},["stop"]))},[e("div",Ie,[e("label",Ue,[_(k,{size:20,color:"black",weight:"bold"})]),e("ul",Ke,[e("li",null,[_(u,{href:n.route("medical-records.show",t.id)},{default:Z(()=>[_(y,{size:16,color:"black",weight:"regular"}),V(" Detail ")]),_:2},1032,["href"])]),a.canEdit(t)?(s(),l("li",Oe,[_(u,{href:n.route("medical-records.edit",t.id),onClick:o[6]||(o[6]=T(()=>{},["stop"]))},{default:Z(()=>[_(D,{size:16,color:"black",weight:"regular"}),V(" Edit ")]),_:2},1032,["href"])])):g("",!0),a.canDelete(t)?(s(),l("li",qe,[e("a",{href:"#",onClick:T(w=>a.confirmDelete(t),["prevent","stop"]),class:"text-error"},[Je,V(" Hapus ")],8,We)])):g("",!0)])])])],8,Le))),128))])])]),r.medicalRecords.data.length===0?(s(),l("div",Qe,et)):g("",!0),r.medicalRecords.data&&r.medicalRecords.data.length>0?(s(),l("div",tt,[e("div",ot,[(s(!0),l(L,null,z(r.medicalRecords.links,(t,p)=>(s(),S(u,{key:p,href:t.url||"#",class:O(["btn",{"btn-active":t.active,"btn-disabled":!t.url}]),innerHTML:t.label},null,8,["href","class","innerHTML"]))),128))])])):g("",!0)])])]),a.showDeleteModal?(s(),l("div",at,[e("div",st,[lt,nt,e("div",rt,[e("button",{onClick:o[8]||(o[8]=t=>a.showDeleteModal=!1),class:"btn"},"Batal"),e("button",{onClick:o[9]||(o[9]=(...t)=>a.deleteRecord&&a.deleteRecord(...t)),class:"btn btn-error"},"Hapus")])])])):g("",!0)]),_:1})}const yt=Y(ye,[["render",it]]);export{yt as default};
