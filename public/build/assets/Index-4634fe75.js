import{r as x,H as g,m as M,o,k as w,w as _,a as n,b as s,i as B,d as e,l as v,h as i,e as u,g as F,v as H,c as r,E as $,t as h,f as V,F as C,n as E}from"./app-807f60dc.js";import{A as O}from"./AppLayout-422bcc0a.js";import{_ as R}from"./ResetFilterButton-97faf3b6.js";import{l as K}from"./lodash-e23d088e.js";import{I as P,G as U}from"./PhPlus.vue-ac80d116.js";import{I as q}from"./PhEye.vue-3a0a261d.js";import{G as J}from"./PhFlask.vue-b6585dea.js";import{G as Q}from"./PhNotePencil.vue-2f5d6dac.js";import{G as W}from"./PhTrashSimple.vue-94343d88.js";import{F as X}from"./PhX.vue-bddc74a7.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhSignOut.vue-98dc8f64.js";import"./_plugin-vue_export-helper-c27b6911.js";const Y={class:"space-y-6"},Z={class:"flex items-center justify-between"},ee=e("div",null,[e("h1",{class:"text-3xl font-semibold"},"Daftar Layanan"),e("p",{class:"text-gray-600"},"Kelola layanan klinik kecantikan")],-1),te={class:"card bg-white shadow-xl"},se={class:"card-body"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},le={class:"form-control"},oe=e("label",{class:"label"},[e("span",{class:"label-text"},"Pencarian")],-1),ne={class:"relative"},re={class:"card bg-white shadow-xl"},ie={class:"card-body"},ce={class:"overflow-x-auto"},de={class:"table table-zebra"},ue=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Nama Layanan"),e("th",null,"Deskripsi"),e("th",null,"Harga"),e("th",null,"Durasi"),e("th",{class:"text-center"},"Aksi")])],-1),he=["onClick"],me={class:"font-semibold"},_e={class:"text-sm max-w-xs truncate"},be={class:"font-medium"},pe={class:"badge badge-info"},ve={class:"dropdown dropdown-left"},fe={tabindex:"0",class:"btn btn-circle btn-ghost btn-sm"},ge={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-40"},ke={key:0},ye={key:1},xe=["onClick"],we={key:0,class:"flex justify-center mt-8"},$e={class:"btn-group"},Ce={key:1,class:"text-center py-12"},De=e("h3",{class:"text-lg font-medium text-gray-600"},"Tidak ada layanan",-1),Ne=e("p",{class:"text-base text-gray-600 mb-4"},"Mulai dengan menambahkan layanan baru.",-1),ze={key:0,class:"modal modal-open"},je={class:"modal-box"},Te=e("p",{class:"text-lg font-semibold"},"Konfirmasi Hapus",-1),Ge={class:"mt-4"},Ie={class:"modal-action"},qe={__name:"Index",props:{services:Object,filters:Object,auth:Object},setup(b){const f=x(!1),p=x(null),D=l=>{p.value=l,f.value=!0},N=()=>{p.value&&g.delete(`/services/${p.value.id}`,{onSuccess:()=>{f.value=!1,p.value=null}})},c=b,k=l=>{var a,d;return(d=(a=c.auth)==null?void 0:a.user)!=null&&d.role?l.includes(c.auth.user.role):!1},m=x({search:c.filters.search||""}),y=K.debounce(()=>{g.get("/services",{search:m.value.search},{preserveState:!0,replace:!0})},300),z=()=>{m.value.search="",y()},j=()=>{m.value.search="",g.get("/services",{},{preserveState:!0,replace:!0})},T=l=>new Intl.NumberFormat("id-ID").format(l),G=l=>(c.services.current_page-1)*c.services.per_page+l+1,I=l=>{g.get(`/services/${l}`)},L=M(()=>{const l=[],a=c.services.current_page,d=c.services.last_page;for(let t=Math.max(1,a-2);t<=Math.min(d,a+2);t++)l.push(t);return l});return(l,a)=>(o(),w(O,null,{default:_(()=>{var d;return[n(s(B),{title:"Layanan"}),e("div",Y,[e("div",Z,[ee,k(["admin","manajer_stok"])?(o(),w(s(v),{key:0,href:"/services/create",class:"btn btn-primary"},{default:_(()=>[n(s(P),{size:20,color:"black",weight:"regular"}),i(" Tambah Layanan ")]),_:1})):u("",!0)]),e("div",te,[e("div",se,[e("div",ae,[e("div",le,[oe,e("div",ne,[F(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>m.value.search=t),type:"text",placeholder:"Nama layanan atau deskripsi...",class:"input input-bordered w-full pr-10",onInput:a[1]||(a[1]=(...t)=>s(y)&&s(y)(...t))},null,544),[[H,m.value.search]]),m.value.search?(o(),r("button",{key:0,onClick:z,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[n(s(X),{size:20,color:"grey",weight:"regular"})])):u("",!0)])]),n(R,{onReset:j})])])]),e("div",re,[e("div",ie,[e("div",ce,[e("table",de,[ue,e("tbody",null,[(o(!0),r(C,null,$(b.services.data,(t,S)=>(o(),r("tr",{key:t.id,onClick:A=>I(t.id),class:"cursor-pointer hover:bg-base-300 transition-colors"},[e("td",null,h(G(S)),1),e("td",null,[e("div",me,h(t.nama_layanan),1)]),e("td",null,[e("div",_e,h(t.deskripsi||"-"),1)]),e("td",null,[e("div",be," Rp "+h(T(t.harga)),1)]),e("td",null,[e("div",pe,h(t.durasi_menit)+" menit ",1)]),e("td",{onClick:a[2]||(a[2]=V(()=>{},["stop"]))},[e("div",ve,[e("label",fe,[n(s(U),{size:20,color:"black",weight:"bold"})]),e("ul",ge,[e("li",null,[n(s(v),{href:`/services/${t.id}`},{default:_(()=>[n(s(q),{size:16,color:"black",weight:"regular"}),i(" Detail ")]),_:2},1032,["href"])]),k(["admin","manajer_stok"])?(o(),r("li",ke,[n(s(v),{href:`/services/${t.id}/edit`},{default:_(()=>[n(s(Q),{size:16,color:"black",weight:"regular"}),i(" Edit ")]),_:2},1032,["href"])])):u("",!0),k(["admin","manajer_stok"])?(o(),r("li",ye,[e("button",{onClick:A=>D(t),class:"text-error"},[n(s(W),{size:16,color:"currentColor",weight:"regular"}),i(" Hapus ")],8,xe)])):u("",!0)])])])],8,he))),128))])])]),b.services.last_page>1?(o(),r("div",we,[e("div",$e,[(o(!0),r(C,null,$(L.value,t=>(o(),w(s(v),{key:t,href:`/services?page=${t}`,class:E(["btn btn-sm",{"btn-active":t===b.services.current_page}])},{default:_(()=>[i(h(t),1)]),_:2},1032,["href","class"]))),128))])])):u("",!0),b.services.data.length===0?(o(),r("div",Ce,[n(s(J),{size:80,color:"black",weight:"regular"}),De,Ne,n(s(v),{href:"/services/create",class:"btn btn-primary"},{default:_(()=>[i(" Tambah Layanan ")]),_:1})])):u("",!0)])])]),f.value?(o(),r("div",ze,[e("div",je,[Te,e("p",Ge,[i(' Apakah Anda yakin ingin menghapus layanan "'),e("strong",null,h((d=p.value)==null?void 0:d.nama_layanan),1),i('"? Tindakan ini tidak dapat dibatalkan. ')]),e("div",Ie,[e("button",{onClick:a[3]||(a[3]=t=>f.value=!1),class:"btn btn-outline"},"Batal"),e("button",{onClick:N,class:"btn btn-error"},"Hapus")])])])):u("",!0)]}),_:1}))}};export{qe as default};
