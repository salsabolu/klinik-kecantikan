import{i as G,l as O,r as M,H as g,G as D,o as i,k as N,w as v,A as V,a as k,d as t,h,g as b,v as S,Q as R,p as z,c as d,E as A,t as r,f as m,n as P,e as u,F as E}from"./app-807f60dc.js";import{A as Q}from"./AppLayout-422bcc0a.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhFlask.vue-b6585dea.js";import"./PhSignOut.vue-98dc8f64.js";const J={components:{Head:G,Link:O,AppLayout:Q},props:{transactions:Object,filters:Object},setup(l){var F,B,K,j,H;const a=M({search:((F=l.filters)==null?void 0:F.search)||"",date_from:((B=l.filters)==null?void 0:B.date_from)||"",date_to:((K=l.filters)==null?void 0:K.date_to)||"",status:((j=l.filters)==null?void 0:j.status)||"",metode:((H=l.filters)==null?void 0:H.metode)||""}),c=M(!1),s=M(null),y=()=>{g.get(route("transactions.index"),a.value,{preserveState:!0,replace:!0})};return{router:g,filters:a,showDeleteModal:c,transactionToDelete:s,getTransactionNumber:o=>{const n=l.transactions.current_page||1,U=l.transactions.per_page||10;return(n-1)*U+o+1},applyFilters:y,clearFilters:()=>{a.value={search:"",date_from:"",date_to:"",status:"",metode:""},y()},confirmDelete:o=>{s.value=o,c.value=!0},deleteTransaction:()=>{s.value&&g.delete(route("transactions.destroy",s.value.id),{onSuccess:()=>{c.value=!1,s.value=null}})},updateStatus:(o,n)=>{g.patch(route("transactions.update-status",o.id),{payment_status:n})},canEdit:o=>{const n=V().props.auth.user;return n.role==="admin"||n.role==="resepsionis"||o.user_id===n.id},canDelete:o=>{const n=V().props.auth.user;return n.role==="admin"||o.user_id===n.id},formatDate:o=>new Date(o).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),formatCurrency:o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(o),formatMetode:o=>({cash:"Tunai",debit_card:"Kartu Debit",credit_card:"Kartu Kredit",transfer:"Transfer",other:"Lainnya",debit:"Kartu Debit",credit:"Kartu Kredit",tunai:"Tunai",kartu:"Kartu"})[o]||o,formatStatus:o=>({paid:"Lunas",pending:"Belum Lunas",partially_paid:"Sebagian Lunas",cancelled:"Dibatalkan",failed:"Gagal"})[o]||o,getStatusClass:o=>({paid:"badge-success",pending:"badge-warning",partially_paid:"badge-info",cancelled:"badge-error",failed:"badge-error"})[o]||"badge-neutral"}}},W={class:"py-12"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Z={class:"p-6 text-gray-900"},$={class:"flex justify-between items-center mb-6"},tt=t("h2",{class:"text-2xl font-semibold"},"Daftar Transaksi",-1),et=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),st={class:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6"},at={class:"form-control"},ot=t("label",{class:"label"},[t("span",{class:"label-text"},"Cari Pasien")],-1),nt={class:"form-control"},lt=t("label",{class:"label"},[t("span",{class:"label-text"},"Dari Tanggal")],-1),it={class:"form-control"},rt=t("label",{class:"label"},[t("span",{class:"label-text"},"Sampai Tanggal")],-1),dt={class:"form-control"},ct=t("label",{class:"label"},[t("span",{class:"label-text"},"Status Pembayaran")],-1),ut=t("option",{value:""},"Semua Status",-1),_t=t("option",{value:"paid"},"Lunas",-1),mt=t("option",{value:"pending"},"Belum Lunas",-1),pt=t("option",{value:"partially_paid"},"Sebagian Lunas",-1),ht=t("option",{value:"cancelled"},"Dibatalkan",-1),bt=[ut,_t,mt,pt,ht],ft={class:"form-control"},gt=t("label",{class:"label"},[t("span",{class:"label-text"},"Metode Pembayaran")],-1),vt=t("option",{value:""},"Semua Metode",-1),kt=t("option",{value:"cash"},"Tunai",-1),yt=t("option",{value:"debit_card"},"Kartu Debit",-1),wt=t("option",{value:"credit_card"},"Kartu Kredit",-1),xt=t("option",{value:"transfer"},"Transfer",-1),Ct=[vt,kt,yt,wt,xt],Mt={class:"form-control"},Dt=t("label",{class:"label"},[t("span",{class:"label-text"},"Â ")],-1),St={class:"overflow-x-auto"},Tt={class:"table table-zebra w-full"},Lt=t("thead",null,[t("tr",null,[t("th",null,"Nomor"),t("th",null,"Tanggal"),t("th",null,"Pasien"),t("th",null,"Total"),t("th",null,"Metode"),t("th",null,"Status"),t("th",null,"Kasir"),t("th",null,"Aksi")])],-1),Ft=["onClick"],Bt={class:"font-medium"},Kt={class:"text-sm opacity-50"},jt={class:"badge badge-outline"},Ht={class:"dropdown dropdown-end"},Nt=t("svg",{class:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1),Vt={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-40 z-10"},zt={key:0},At=["onClick"],Pt=t("span",{class:"badge badge-success badge-sm"},"Lunas",-1),Et=[Pt],It={key:1},Ut=["onClick"],Gt=t("span",{class:"badge badge-warning badge-sm"},"Belum Lunas",-1),Ot=[Gt],Rt={key:2},Qt=["onClick"],qt=t("span",{class:"badge badge-info badge-sm"},"Sebagian Lunas",-1),Jt=[qt],Wt={key:3},Xt=["onClick"],Yt=t("span",{class:"badge badge-error badge-sm"},"Dibatalkan",-1),Zt=[Yt],$t={class:"dropdown dropdown-left"},te=t("label",{tabindex:"0",class:"btn btn-sm btn-circle btn-ghost"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])],-1),ee={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"},se=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),ae={key:0},oe=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),ne={key:1},le=["onClick"],ie=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),re={class:"flex justify-between items-center mt-6"},de={class:"text-sm text-gray-500"},ce={class:"join"},ue={key:0,class:"modal modal-open"},_e={class:"modal-box"},me=t("h3",{class:"font-bold text-lg"},"Konfirmasi Hapus",-1),pe=t("p",{class:"py-4"},"Apakah Anda yakin ingin menghapus transaksi ini? Tindakan ini tidak dapat dibatalkan.",-1),he={class:"modal-action"};function be(l,a,c,s,y,I){const T=D("Head"),p=D("Link"),L=D("AppLayout");return i(),N(L,null,{default:v(()=>[k(T,{title:"Transaksi"}),t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",$,[tt,k(p,{href:l.route("transactions.create"),class:"btn btn-primary"},{default:v(()=>[et,h(" Transaksi Baru ")]),_:1},8,["href"])]),t("div",st,[t("div",at,[ot,b(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.filters.search=e),type:"text",placeholder:"Nama atau nomor telepon...",class:"input input-bordered",onKeyup:a[1]||(a[1]=R((...e)=>s.applyFilters&&s.applyFilters(...e),["enter"]))},null,544),[[S,s.filters.search]])]),t("div",nt,[lt,b(t("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>s.filters.date_from=e),type:"date",class:"input input-bordered",onChange:a[3]||(a[3]=(...e)=>s.applyFilters&&s.applyFilters(...e))},null,544),[[S,s.filters.date_from]])]),t("div",it,[rt,b(t("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>s.filters.date_to=e),type:"date",class:"input input-bordered",onChange:a[5]||(a[5]=(...e)=>s.applyFilters&&s.applyFilters(...e))},null,544),[[S,s.filters.date_to]])]),t("div",dt,[ct,b(t("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>s.filters.status=e),class:"select select-bordered",onChange:a[7]||(a[7]=(...e)=>s.applyFilters&&s.applyFilters(...e))},bt,544),[[z,s.filters.status]])]),t("div",ft,[gt,b(t("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>s.filters.metode=e),class:"select select-bordered",onChange:a[9]||(a[9]=(...e)=>s.applyFilters&&s.applyFilters(...e))},Ct,544),[[z,s.filters.metode]])]),t("div",Mt,[Dt,t("button",{onClick:a[10]||(a[10]=(...e)=>s.clearFilters&&s.clearFilters(...e)),class:"btn btn-outline"}," Reset Filter ")])]),t("div",St,[t("table",Tt,[Lt,t("tbody",null,[(i(!0),d(E,null,A(c.transactions.data,(e,f)=>{var w,x,C;return i(),d("tr",{key:e.id,class:"hover:bg-gray-50 cursor-pointer",onClick:_=>s.router.visit(l.route("transactions.show",e.id))},[t("td",null,r(s.getTransactionNumber(f)),1),t("td",null,r(s.formatDate(e.tanggal_transaksi)),1),t("td",null,[t("div",null,[t("div",Bt,r((w=e.patient)==null?void 0:w.nama_lengkap),1),t("div",Kt,r((x=e.patient)==null?void 0:x.nomor_telepon),1)])]),t("td",null,r(s.formatCurrency(e.total_amount)),1),t("td",null,[t("div",jt,r(s.formatMetode(e.payment_method)),1)]),t("td",{onClick:a[11]||(a[11]=m(()=>{},["stop"]))},[t("div",Ht,[t("label",{tabindex:"0",class:P(["badge cursor-pointer",s.getStatusClass(e.payment_status)])},[h(r(s.formatStatus(e.payment_status))+" ",1),Nt],2),t("ul",Vt,[e.payment_status!=="paid"?(i(),d("li",zt,[t("a",{onClick:m(_=>s.updateStatus(e,"paid"),["stop"]),class:"text-sm"},Et,8,At)])):u("",!0),e.payment_status!=="pending"?(i(),d("li",It,[t("a",{onClick:m(_=>s.updateStatus(e,"pending"),["stop"]),class:"text-sm"},Ot,8,Ut)])):u("",!0),e.payment_status!=="partially_paid"?(i(),d("li",Rt,[t("a",{onClick:m(_=>s.updateStatus(e,"partially_paid"),["stop"]),class:"text-sm"},Jt,8,Qt)])):u("",!0),e.payment_status!=="cancelled"?(i(),d("li",Wt,[t("a",{onClick:m(_=>s.updateStatus(e,"cancelled"),["stop"]),class:"text-sm"},Zt,8,Xt)])):u("",!0)])])]),t("td",null,r((C=e.user)==null?void 0:C.name),1),t("td",{onClick:a[12]||(a[12]=m(()=>{},["stop"]))},[t("div",$t,[te,t("ul",ee,[t("li",null,[k(p,{href:l.route("transactions.show",e.id)},{default:v(()=>[se,h(" Detail ")]),_:2},1032,["href"])]),s.canEdit(e)?(i(),d("li",ae,[k(p,{href:l.route("transactions.edit",e.id)},{default:v(()=>[oe,h(" Edit ")]),_:2},1032,["href"])])):u("",!0),s.canDelete(e)?(i(),d("li",ne,[t("a",{onClick:_=>s.confirmDelete(e)},[ie,h(" Hapus ")],8,le)])):u("",!0)])])])],8,Ft)}),128))])])]),t("div",re,[t("div",de," Menampilkan "+r(c.transactions.from)+" - "+r(c.transactions.to)+" dari "+r(c.transactions.total)+" transaksi ",1),t("div",ce,[(i(!0),d(E,null,A(c.transactions.links,(e,f)=>(i(),N(p,{key:f,href:e.url||"#",class:P(["join-item btn btn-sm",{"btn-active":e.active,"btn-disabled":!e.url}]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])])])])])]),s.showDeleteModal?(i(),d("div",ue,[t("div",_e,[me,pe,t("div",he,[t("button",{onClick:a[13]||(a[13]=e=>s.showDeleteModal=!1),class:"btn"},"Batal"),t("button",{onClick:a[14]||(a[14]=(...e)=>s.deleteTransaction&&s.deleteTransaction(...e)),class:"btn btn-error"},"Hapus")])])])):u("",!0)]),_:1})}const De=q(J,[["render",be]]);export{De as default};
