import{A as E,J as K,r as C,m as F,H as x,o as a,k as w,w as m,a as g,b as l,i as I,d as e,l as b,h as u,e as h,g as M,v as J,p as R,c as o,E as A,t as r,n as D,f as O,F as B}from"./app-807f60dc.js";import{A as U}from"./AppLayout-422bcc0a.js";import{_ as q}from"./ResetFilterButton-97faf3b6.js";import{l as G}from"./lodash-e23d088e.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhFlask.vue-b6585dea.js";import"./PhSignOut.vue-98dc8f64.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PhX.vue-bddc74a7.js";const Q={class:"space-y-6"},W={class:"flex items-center justify-between"},X=e("div",null,[e("h1",{class:"text-3xl font-serif font-bold text-clinic-green"},"Data Pasien"),e("p",{class:"text-gray-600 mt-1 font-sans"},"Kelola data pasien klinik")],-1),Y=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z={class:"card bg-white shadow-lg rounded-xl border border-gray-200"},ee={class:"card-body bg-primary-bg"},te={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},se={class:"form-control"},ne=e("label",{class:"label"},[e("span",{class:"label-text font-sans text-clinic-green"},"Pencarian")],-1),ae={class:"form-control"},oe=e("label",{class:"label"},[e("span",{class:"label-text font-sans text-clinic-green"},"Jenis Kelamin")],-1),le=e("option",{value:""},"Semua",-1),ie=e("option",{value:"Laki-laki"},"Laki-laki",-1),re=e("option",{value:"Perempuan"},"Perempuan",-1),de=[le,ie,re],ce={class:"card bg-white shadow-lg rounded-xl border border-gray-200"},ue={class:"card-body bg-primary-bg"},he={class:"overflow-x-auto"},pe={class:"table table-zebra"},_e=e("thead",null,[e("tr",null,[e("th",{class:"font-serif text-clinic-green"},"No"),e("th",{class:"font-serif text-clinic-green"},"Nama Lengkap"),e("th",{class:"font-serif text-clinic-green"},"Jenis Kelamin"),e("th",{class:"font-serif text-clinic-green"},"Tanggal Lahir"),e("th",{class:"font-serif text-clinic-green"},"Nomor Telepon"),e("th",{class:"font-serif text-clinic-green"},"Email"),e("th",{class:"font-serif text-clinic-green"},"Status Akun"),e("th",{class:"font-serif text-clinic-green"},"Aksi")])],-1),me=["onClick"],ke={class:"font-semibold"},fe={key:0,class:"badge badge-success"},ge={key:1,class:"badge badge-warning"},be={class:"dropdown dropdown-end"},ve=e("label",{tabindex:"0",class:"btn btn-ghost btn-sm"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])],-1),xe={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"},we=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.543 7-1.275 4.057-5.065 7-9.543 7-4.477 0-8.268-2.943-9.542-7z"})],-1),ye={key:0},je=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Ce={key:1},Me=["onClick"],Ae=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),De={key:0,class:"text-center py-8"},Be=e("svg",{class:"w-16 h-16 mx-auto text-base-content/30 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),ze=e("p",{class:"text-base-content/60"},"Belum ada data pasien",-1),Le=[Be,ze],Pe={key:1,class:"flex justify-center mt-6"},Ne={class:"btn-group"},He={key:0,class:"modal modal-open"},Te={class:"modal-box"},$e=e("h3",{class:"font-bold text-lg"},"Konfirmasi Hapus",-1),Se={class:"py-4"},Ve={class:"modal-action"},Qe={__name:"Index",props:{patients:Object,filters:Object},setup(p){var y,j;const{props:d}=E(),i=K({search:((y=d.filters)==null?void 0:y.search)||"",jenis_kelamin:((j=d.filters)==null?void 0:j.jenis_kelamin)||""}),k=C(!1),f=C(null),z=F(()=>{const n=[],s=d.patients.current_page,c=d.patients.last_page;for(let t=Math.max(1,s-2);t<=Math.min(c,s+2);t++)n.push(t);return n}),_=G.debounce(()=>{x.get("/patients",i,{preserveState:!0,replace:!0})},300),L=n=>(d.patients.current_page-1)*d.patients.per_page+n+1,P=n=>{x.get(`/patients/${n}`)},N=()=>{i.search="",i.jenis_kelamin="",_()},H=n=>{f.value=n,k.value=!0},T=()=>{x.delete(`/patients/${f.value.id}`,{onSuccess:()=>{k.value=!1,f.value=null}})},$=n=>new Date(n).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),v=n=>{var c,t;const s=(t=(c=d.auth)==null?void 0:c.user)==null?void 0:t.role;return n.includes(s)};return(n,s)=>(a(),w(U,null,{default:m(()=>{var c;return[g(l(I),{title:"Data Pasien"}),e("div",Q,[e("div",W,[X,v(["admin","resepsionis"])?(a(),w(l(b),{key:0,href:"/patients/create",class:"btn btn-outline btn-primary"},{default:m(()=>[Y,u(" Tambah Pasien ")]),_:1})):h("",!0)]),e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[ne,M(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.search=t),type:"text",placeholder:"Nama, telepon, atau email...",class:"input input-bordered",onInput:s[1]||(s[1]=(...t)=>l(_)&&l(_)(...t))},null,544),[[J,i.search]])]),e("div",ae,[oe,M(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>i.jenis_kelamin=t),class:"select select-bordered",onChange:s[3]||(s[3]=(...t)=>l(_)&&l(_)(...t))},de,544),[[R,i.jenis_kelamin]])]),g(q,{onReset:N})])])]),e("div",ce,[e("div",ue,[e("div",he,[e("table",pe,[_e,e("tbody",null,[(a(!0),o(B,null,A(p.patients.data,(t,S)=>(a(),o("tr",{key:t.id,class:"hover cursor-pointer transition-colors",onClick:V=>P(t.id)},[e("td",null,r(L(S)),1),e("td",ke,r(t.nama_lengkap),1),e("td",null,[e("span",{class:D([t.jenis_kelamin==="Laki-laki"?"badge-info":"badge-secondary","badge"])},r(t.jenis_kelamin),3)]),e("td",null,r($(t.tanggal_lahir)),1),e("td",null,r(t.nomor_telepon),1),e("td",null,r(t.email||"-"),1),e("td",null,[t.user?(a(),o("span",fe," Ada Akun ")):(a(),o("span",ge," Tidak Ada Akun "))]),e("td",{onClick:s[4]||(s[4]=O(()=>{},["stop"]))},[e("div",be,[ve,e("ul",xe,[e("li",null,[g(l(b),{href:`/patients/${t.id}`},{default:m(()=>[we,u(" Detail ")]),_:2},1032,["href"])]),v(["admin","resepsionis"])?(a(),o("li",ye,[g(l(b),{href:`/patients/${t.id}/edit`},{default:m(()=>[je,u(" Edit ")]),_:2},1032,["href"])])):h("",!0),v(["admin","resepsionis"])?(a(),o("li",Ce,[e("a",{onClick:V=>H(t),class:"text-error"},[Ae,u(" Hapus ")],8,Me)])):h("",!0)])])])],8,me))),128))])])]),p.patients.data.length===0?(a(),o("div",De,Le)):h("",!0),p.patients.last_page>1?(a(),o("div",Pe,[e("div",Ne,[(a(!0),o(B,null,A(z.value,t=>(a(),w(l(b),{key:t,href:p.patients.path,data:{...i,page:t},class:D(["btn",t===p.patients.current_page?"btn-active":""]),"preserve-scroll":""},{default:m(()=>[u(r(t),1)]),_:2},1032,["href","data","class"]))),128))])])):h("",!0)])])]),k.value?(a(),o("div",He,[e("div",Te,[$e,e("p",Se,[u(" Apakah Anda yakin ingin menghapus data pasien "),e("strong",null,r((c=f.value)==null?void 0:c.nama_lengkap),1),u("? Data yang sudah dihapus tidak dapat dikembalikan. ")]),e("div",Ve,[e("button",{onClick:s[5]||(s[5]=t=>k.value=!1),class:"btn"},"Batal"),e("button",{onClick:T,class:"btn btn-error"},"Hapus")])])])):h("",!0)]}),_:1}))}};export{Qe as default};
