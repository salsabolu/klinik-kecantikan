import{i as z,l as P,A as U,r as y,m as V,G as M,o as r,k as T,w as v,H as j,a as b,d as t,h as _,t as n,g as L,v as E,Q as K,p as O,c as d,E as H,e as p,n as R,f as A,F as B}from"./app-807f60dc.js";import{A as I}from"./AppLayout-422bcc0a.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhFlask.vue-b6585dea.js";import"./PhSignOut.vue-98dc8f64.js";const Q={components:{Head:z,Link:P,AppLayout:I},props:{users:Object,filters:Object,statistics:Object},setup(l){var C,D;const o=U(),i=y({search:((C=l.filters)==null?void 0:C.search)||"",role:((D=l.filters)==null?void 0:D.role)||""}),s=y(!1),c=y(null),g=()=>{j.get(route("users.index"),i.value,{preserveState:!0,replace:!0})},k=()=>{i.value={search:"",role:""},g()},u=a=>(l.users.current_page-1)*l.users.per_page+a+1,f=a=>{j.get(route("users.show",a))},m=a=>{c.value=a,s.value=!0},e=()=>{c.value&&j.delete(route("users.destroy",c.value.id),{onSuccess:()=>{s.value=!1,c.value=null}})},h=a=>{const x=o.props.auth.user;return a.id!==x.id},w=a=>({admin:"Administrator",resepsionis:"Resepsionis",dokter:"Dokter/Terapis",manajer_stok:"Manajer Stok",pasien:"Pasien"})[a]||a,F=a=>({admin:"badge-error",resepsionis:"badge-warning",dokter:"badge-info",manajer_stok:"badge-success",pasien:"badge-neutral"})[a]||"badge-neutral",S=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),N=V(()=>l.statistics||{admin:0,resepsionis:0,dokter:0,manajer_stok:0,pasien:0});return{filters:i,showDeleteModal:s,userToDelete:c,applyFilters:g,clearFilters:k,getRowNumber:u,navigateToUser:f,confirmDelete:m,deleteUser:e,canDelete:h,getRoleLabel:w,getRoleClass:F,formatDate:S,statistics:N}}},q={class:"py-12"},J={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},W={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},X={class:"p-6 text-gray-900"},Y={class:"flex justify-between items-center mb-6"},Z=t("h2",{class:"text-2xl font-semibold"},"Manajemen Pengguna",-1),$=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),tt={class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"},et={class:"stat bg-base-200 rounded-lg"},st=t("div",{class:"stat-title"},"Total Admin",-1),ot={class:"stat-value text-xl"},at={class:"stat bg-base-200 rounded-lg"},nt=t("div",{class:"stat-title"},"Total Resepsionis",-1),lt={class:"stat-value text-xl"},it={class:"stat bg-base-200 rounded-lg"},rt=t("div",{class:"stat-title"},"Total Dokter",-1),dt={class:"stat-value text-xl"},ct={class:"stat bg-base-200 rounded-lg"},ut=t("div",{class:"stat-title"},"Total Manajer Stok",-1),_t={class:"stat-value text-xl"},ht={class:"stat bg-base-200 rounded-lg"},mt=t("div",{class:"stat-title"},"Total Pasien",-1),vt={class:"stat-value text-xl"},bt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},pt={class:"form-control"},gt=t("label",{class:"label"},[t("span",{class:"label-text"},"Cari Pengguna")],-1),kt={class:"form-control"},ft=t("label",{class:"label"},[t("span",{class:"label-text"},"Filter Role")],-1),wt=t("option",{value:""},"Semua Role",-1),xt=t("option",{value:"admin"},"Administrator",-1),yt=t("option",{value:"resepsionis"},"Resepsionis",-1),Mt=t("option",{value:"dokter"},"Dokter/Terapis",-1),jt=t("option",{value:"manajer_stok"},"Manajer Stok",-1),Ct=t("option",{value:"pasien"},"Pasien",-1),Dt=[wt,xt,yt,Mt,jt,Ct],Tt={class:"form-control"},Lt=t("label",{class:"label"},[t("span",{class:"label-text"},"Â ")],-1),Ht={class:"overflow-x-auto"},Rt={class:"table table-zebra w-full"},At=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Nama"),t("th",null,"Email"),t("th",null,"Role"),t("th",null,"Dibuat"),t("th",null,"Aksi")])],-1),Bt=["onClick"],Ft={class:"font-medium"},St={key:0,class:"text-xs text-gray-500"},Nt={class:"dropdown dropdown-end"},zt=t("label",{tabindex:"0",class:"btn btn-ghost btn-sm"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])],-1),Pt={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"},Ut=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),Vt={key:0},Et=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Kt={key:1},Ot=["onClick"],It=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Gt={class:"flex justify-between items-center mt-6"},Qt={class:"text-sm text-gray-500"},qt={class:"join"},Jt={key:0,class:"modal modal-open"},Wt={class:"modal-box"},Xt=t("h3",{class:"font-bold text-lg"},"Konfirmasi Hapus",-1),Yt={class:"py-4"},Zt={class:"modal-action"};function $t(l,o,i,s,c,g){const k=M("Head"),u=M("Link"),f=M("AppLayout");return r(),T(f,null,{default:v(()=>{var m;return[b(k,{title:"Manajemen Pengguna"}),t("div",q,[t("div",J,[t("div",W,[t("div",X,[t("div",Y,[Z,b(u,{href:l.route("users.create"),class:"btn btn-primary"},{default:v(()=>[$,_(" Pengguna Baru ")]),_:1},8,["href"])]),t("div",tt,[t("div",et,[st,t("div",ot,n(s.statistics.admin),1)]),t("div",at,[nt,t("div",lt,n(s.statistics.resepsionis),1)]),t("div",it,[rt,t("div",dt,n(s.statistics.dokter),1)]),t("div",ct,[ut,t("div",_t,n(s.statistics.manajer_stok),1)]),t("div",ht,[mt,t("div",vt,n(s.statistics.pasien),1)])]),t("div",bt,[t("div",pt,[gt,L(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.filters.search=e),type:"text",placeholder:"Nama atau email...",class:"input input-bordered",onKeyup:o[1]||(o[1]=K((...e)=>s.applyFilters&&s.applyFilters(...e),["enter"]))},null,544),[[E,s.filters.search]])]),t("div",kt,[ft,L(t("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.filters.role=e),class:"select select-bordered",onChange:o[3]||(o[3]=(...e)=>s.applyFilters&&s.applyFilters(...e))},Dt,544),[[O,s.filters.role]])]),t("div",Tt,[Lt,t("button",{onClick:o[4]||(o[4]=(...e)=>s.clearFilters&&s.clearFilters(...e)),class:"btn btn-outline"}," Reset Filter ")])]),t("div",Ht,[t("table",Rt,[At,t("tbody",null,[(r(!0),d(B,null,H(i.users.data,(e,h)=>(r(),d("tr",{key:e.id,class:"hover cursor-pointer transition-colors",onClick:w=>s.navigateToUser(e.id)},[t("td",null,n(s.getRowNumber(h)),1),t("td",null,[t("div",null,[t("div",Ft,n(e.name),1),e.is_patient_without_account?(r(),d("div",St," Belum memiliki akun ")):p("",!0)])]),t("td",null,n(e.email),1),t("td",null,[t("div",{class:R(["badge badge-lg",s.getRoleClass(e.role)])},n(s.getRoleLabel(e.role)),3)]),t("td",null,n(s.formatDate(e.created_at)),1),t("td",{onClick:o[5]||(o[5]=A(()=>{},["stop"]))},[t("div",Nt,[zt,t("ul",Pt,[t("li",null,[b(u,{href:l.route("users.show",e.id),title:"Lihat Detail"},{default:v(()=>[Ut,_(" Detail ")]),_:2},1032,["href"])]),e.is_patient_without_account?p("",!0):(r(),d("li",Vt,[b(u,{href:l.route("users.edit",e.id),title:"Edit"},{default:v(()=>[Et,_(" Edit ")]),_:2},1032,["href"])])),s.canDelete(e)&&!e.is_patient_without_account?(r(),d("li",Kt,[t("a",{href:"#",onClick:A(w=>s.confirmDelete(e),["prevent"]),class:"text-error",title:"Hapus"},[It,_(" Hapus ")],8,Ot)])):p("",!0)])])])],8,Bt))),128))])])]),t("div",Gt,[t("div",Qt," Menampilkan "+n(i.users.from)+" - "+n(i.users.to)+" dari "+n(i.users.total)+" pengguna ",1),t("div",qt,[(r(!0),d(B,null,H(i.users.links,(e,h)=>(r(),T(u,{key:h,href:e.url||"#",class:R(["join-item btn btn-sm",{"btn-active":e.active,"btn-disabled":!e.url}]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])])])])])]),s.showDeleteModal?(r(),d("div",Jt,[t("div",Wt,[Xt,t("p",Yt,[_("Apakah Anda yakin ingin menghapus pengguna "),t("strong",null,n((m=s.userToDelete)==null?void 0:m.name),1),_("? Tindakan ini tidak dapat dibatalkan.")]),t("div",Zt,[t("button",{onClick:o[6]||(o[6]=e=>s.showDeleteModal=!1),class:"btn"},"Batal"),t("button",{onClick:o[7]||(o[7]=(...e)=>s.deleteUser&&s.deleteUser(...e)),class:"btn btn-error"},"Hapus")])])])):p("",!0)]}),_:1})}const ie=G(Q,[["render",$t]]);export{ie as default};
