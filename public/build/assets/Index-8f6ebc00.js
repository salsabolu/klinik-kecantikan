import{i as N,l as U,r as f,m as P,G as M,o as n,k as b,w as p,H as w,a as D,d as e,h as i,e as c,g,v as T,p as H,c as l,E as R,t as d,F as C,f as z,n as B}from"./app-807f60dc.js";import{A as E}from"./AppLayout-422bcc0a.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhFlask.vue-b6585dea.js";import"./PhSignOut.vue-98dc8f64.js";const O={components:{Head:N,Link:U,AppLayout:E},props:{reservations:Object,doctors:Array,flash:Object},setup(r){const o=f({search:"",status:"",start_date:"",end_date:"",doctor:""}),u=f(!1),s=f(null),k=f(!1),m=f(null),x=P(()=>r.reservations.data?r.reservations.data.filter(a=>{const v=!o.value.search||a.patient.nama_lengkap.toLowerCase().includes(o.value.search.toLowerCase()),A=!o.value.status||a.status===o.value.status,j=new Date(a.tanggal_reservasi),V=!o.value.start_date||j>=new Date(o.value.start_date),F=!o.value.end_date||j<=new Date(o.value.end_date),I=!o.value.doctor||a.user_id==o.value.doctor;return v&&A&&V&&F&&I}):[]),h=()=>{w.get(route("reservations.index"),o.value,{preserveState:!0,preserveScroll:!0})};return{filters:o,filteredReservations:x,showDeleteModal:u,reservationToDelete:s,showStatusModal:k,statusToChange:m,filterReservations:h,clearFilters:()=>{o.value={search:"",status:"",start_date:"",end_date:"",doctor:""},h()},confirmDelete:a=>{s.value=a,u.value=!0},deleteReservation:()=>{w.delete(route("reservations.destroy",s.value.id),{onSuccess:()=>{u.value=!1,s.value=null}})},confirmStatusChange:(a,v)=>{m.value={reservation:a,currentStatus:a.status,newStatus:v},k.value=!0},updateStatus:()=>{m.value&&w.patch(route("reservations.update",m.value.reservation.id),{status:m.value.newStatus},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{k.value=!1,m.value=null}})},goToShow:a=>{w.visit(route("reservations.show",a))},formatDate:a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),formatTime:a=>new Date(`2000-01-01 ${a}`).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),formatCurrency:a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a),getStatusClass:a=>({pending:"badge-warning",confirmed:"badge-info",completed:"badge-success",cancelled:"badge-error"})[a]||"badge-ghost",getStatusText:a=>({pending:"Pending",confirmed:"Dikonfirmasi",completed:"Selesai",cancelled:"Dibatalkan"})[a]||a}}},G={class:"py-12"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},q={class:"p-6 text-gray-900"},J={class:"flex justify-between items-center mb-6"},Q=e("h2",{class:"text-2xl font-semibold"},"Daftar Reservasi",-1),X=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Z={class:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6"},$={class:"form-control"},ee=e("label",{class:"label"},[e("span",{class:"label-text"},"Cari Pasien")],-1),te={class:"form-control"},se=e("label",{class:"label"},[e("span",{class:"label-text"},"Status")],-1),oe=e("option",{value:""},"Semua Status",-1),ae=e("option",{value:"pending"},"Pending",-1),ne=e("option",{value:"confirmed"},"Confirmed",-1),le=e("option",{value:"completed"},"Completed",-1),re=e("option",{value:"cancelled"},"Cancelled",-1),ie=[oe,ae,ne,le,re],de={class:"form-control"},ce=e("label",{class:"label"},[e("span",{class:"label-text"},"Tanggal Dari")],-1),ue={class:"form-control"},he=e("label",{class:"label"},[e("span",{class:"label-text"},"Tanggal Sampai")],-1),me={class:"form-control"},_e=e("label",{class:"label"},[e("span",{class:"label-text"},"Dokter")],-1),ve=e("option",{value:""},"Semua Dokter",-1),fe=["value"],pe={class:"form-control"},ge=e("label",{class:"label"},[e("span",{class:"label-text"},"Reset")],-1),ke={class:"overflow-x-auto"},be={class:"table table-zebra w-full"},we=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Pasien"),e("th",null,"Layanan"),e("th",null,"Dokter"),e("th",null,"Tanggal"),e("th",null,"Waktu"),e("th",null,"Status"),e("th",null,"Aksi")])],-1),Ce=["onClick"],xe={class:"font-medium"},ye={class:"text-sm text-gray-500"},Se={class:"font-medium"},Me={class:"text-sm text-gray-500"},De={key:0,class:"dropdown dropdown-bottom"},Te=e("svg",{class:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1),Re={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-48 z-10"},Be={key:0},Le=["onClick"],je=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),He={key:1},ze=["onClick"],Ae=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),Ve={key:2},Fe=["onClick"],Ie=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Ne={class:"dropdown dropdown-left"},Ue=e("label",{tabindex:"0",class:"btn btn-sm btn-circle btn-ghost"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])],-1),Pe={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"},Ee=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),Ke={key:0},Oe=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Ge={key:1},We=["onClick"],Ye=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),qe={key:0,class:"text-center py-12"},Je=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),Qe=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tidak ada reservasi",-1),Xe=e("p",{class:"mt-1 text-sm text-gray-500"},"Mulai dengan membuat reservasi baru.",-1),Ze={class:"mt-6"},$e={key:1,class:"flex justify-center mt-6"},et={class:"btn-group"},tt=["innerHTML"],st={key:0,class:"modal modal-open"},ot={class:"modal-box"},at=e("h3",{class:"font-bold text-lg"},"Konfirmasi Hapus",-1),nt=e("p",{class:"py-4"},"Apakah Anda yakin ingin menghapus reservasi ini? Tindakan ini tidak dapat dibatalkan.",-1),lt={class:"modal-action"},rt={key:1,class:"modal modal-open"},it={class:"modal-box"},dt=e("h3",{class:"font-bold text-lg mb-4"},[e("svg",{class:"w-6 h-6 inline-block mr-2 text-info",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),i(" Konfirmasi Perubahan Status ")],-1),ct={class:"py-4 text-base-content/80"},ut={class:"font-semibold"},ht={class:"font-semibold"},mt={class:"modal-action"},_t=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),vt=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1);function ft(r,o,u,s,k,m){const x=M("Head"),h=M("Link"),L=M("AppLayout");return n(),b(L,null,{default:p(()=>{var y,S;return[D(x,{title:"Daftar Reservasi"}),e("div",G,[e("div",W,[e("div",Y,[e("div",q,[e("div",J,[Q,r.$page.props.auth.user.role==="admin"||r.$page.props.auth.user.role==="resepsionis"?(n(),b(h,{key:0,href:r.route("reservations.create"),class:"btn btn-primary"},{default:p(()=>[X,i(" Reservasi Baru ")]),_:1},8,["href"])):c("",!0)]),e("div",Z,[e("div",$,[ee,g(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>s.filters.search=t),placeholder:"Nama pasien...",class:"input input-bordered",onInput:o[1]||(o[1]=(...t)=>s.filterReservations&&s.filterReservations(...t))},null,544),[[T,s.filters.search]])]),e("div",te,[se,g(e("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>s.filters.status=t),class:"select select-bordered",onChange:o[3]||(o[3]=(...t)=>s.filterReservations&&s.filterReservations(...t))},ie,544),[[H,s.filters.status]])]),e("div",de,[ce,g(e("input",{type:"date","onUpdate:modelValue":o[4]||(o[4]=t=>s.filters.start_date=t),class:"input input-bordered",onChange:o[5]||(o[5]=(...t)=>s.filterReservations&&s.filterReservations(...t))},null,544),[[T,s.filters.start_date]])]),e("div",ue,[he,g(e("input",{type:"date","onUpdate:modelValue":o[6]||(o[6]=t=>s.filters.end_date=t),class:"input input-bordered",onChange:o[7]||(o[7]=(...t)=>s.filterReservations&&s.filterReservations(...t))},null,544),[[T,s.filters.end_date]])]),e("div",me,[_e,g(e("select",{"onUpdate:modelValue":o[8]||(o[8]=t=>s.filters.doctor=t),class:"select select-bordered",onChange:o[9]||(o[9]=(...t)=>s.filterReservations&&s.filterReservations(...t))},[ve,(n(!0),l(C,null,R(u.doctors,t=>(n(),l("option",{key:t.id,value:t.id},d(t.name),9,fe))),128))],544),[[H,s.filters.doctor]])]),e("div",pe,[ge,e("button",{onClick:o[10]||(o[10]=(...t)=>s.clearFilters&&s.clearFilters(...t)),class:"btn btn-outline"}," Reset Filter ")])]),e("div",ke,[e("table",be,[we,e("tbody",null,[(n(!0),l(C,null,R(s.filteredReservations,t=>(n(),l("tr",{key:t.id,onClick:_=>s.goToShow(t.id),class:"cursor-pointer hover:bg-gray-50 transition-colors"},[e("td",null,d((u.reservations.current_page-1)*u.reservations.per_page+s.filteredReservations.indexOf(t)+1),1),e("td",null,[e("div",xe,d(t.patient.nama_lengkap),1),e("div",ye,d(t.patient.nomor_telepon),1)]),e("td",null,[e("div",Se,d(t.service.nama_layanan),1),e("div",Me,d(s.formatCurrency(t.service.harga)),1)]),e("td",null,d(t.user.name),1),e("td",null,d(s.formatDate(t.tanggal_reservasi)),1),e("td",null,d(s.formatTime(t.waktu_mulai))+" - "+d(s.formatTime(t.waktu_selesai)),1),e("td",{onClick:o[11]||(o[11]=z(()=>{},["stop"]))},[r.$page.props.auth.user.role==="admin"||r.$page.props.auth.user.role==="resepsionis"?(n(),l("div",De,[e("label",{tabindex:"0",class:B(["badge cursor-pointer",s.getStatusClass(t.status)])},[i(d(s.getStatusText(t.status))+" ",1),Te],2),e("ul",Re,[t.status!=="confirmed"?(n(),l("li",Be,[e("a",{onClick:_=>s.confirmStatusChange(t,"confirmed")},[je,i(" Konfirmasi ")],8,Le)])):c("",!0),t.status!=="completed"?(n(),l("li",He,[e("a",{onClick:_=>s.confirmStatusChange(t,"completed")},[Ae,i(" Selesai ")],8,ze)])):c("",!0),t.status!=="cancelled"?(n(),l("li",Ve,[e("a",{onClick:_=>s.confirmStatusChange(t,"cancelled")},[Ie,i(" Batalkan ")],8,Fe)])):c("",!0)])])):(n(),l("div",{key:1,class:B(["badge",s.getStatusClass(t.status)])},d(s.getStatusText(t.status)),3))]),e("td",{onClick:o[12]||(o[12]=z(()=>{},["stop"]))},[e("div",Ne,[Ue,e("ul",Pe,[e("li",null,[D(h,{href:r.route("reservations.show",t.id)},{default:p(()=>[Ee,i(" Detail ")]),_:2},1032,["href"])]),r.$page.props.auth.user.role==="admin"||r.$page.props.auth.user.role==="resepsionis"?(n(),l("li",Ke,[D(h,{href:r.route("reservations.edit",t.id)},{default:p(()=>[Oe,i(" Edit ")]),_:2},1032,["href"])])):c("",!0),r.$page.props.auth.user.role==="admin"||r.$page.props.auth.user.role==="resepsionis"?(n(),l("li",Ge,[e("a",{onClick:_=>s.confirmDelete(t)},[Ye,i(" Hapus ")],8,We)])):c("",!0)])])])],8,Ce))),128))])])]),s.filteredReservations.length===0?(n(),l("div",qe,[Je,Qe,Xe,e("div",Ze,[r.$page.props.auth.user.role==="admin"||r.$page.props.auth.user.role==="resepsionis"?(n(),b(h,{key:0,href:r.route("reservations.create"),class:"btn btn-primary"},{default:p(()=>[i(" Reservasi Baru ")]),_:1},8,["href"])):c("",!0)])])):c("",!0),u.reservations.data&&u.reservations.data.length>0?(n(),l("div",$e,[e("div",et,[(n(!0),l(C,null,R(u.reservations.links,t=>(n(),l(C,{key:t.label},[t.url?(n(),b(h,{key:0,href:t.url,class:B(["btn",{"btn-active":t.active}]),innerHTML:t.label},null,8,["href","class","innerHTML"])):(n(),l("span",{key:1,class:"btn btn-disabled",innerHTML:t.label},null,8,tt))],64))),128))])])):c("",!0)])])])]),s.showDeleteModal?(n(),l("div",st,[e("div",ot,[at,nt,e("div",lt,[e("button",{onClick:o[13]||(o[13]=t=>s.showDeleteModal=!1),class:"btn"},"Batal"),e("button",{onClick:o[14]||(o[14]=(...t)=>s.deleteReservation&&s.deleteReservation(...t)),class:"btn btn-error"},"Hapus")])])])):c("",!0),s.showStatusModal?(n(),l("div",rt,[e("div",it,[dt,e("p",ct,[i(" Apakah Anda yakin ingin mengubah status reservasi dari "),e("span",ut,d(s.getStatusText((y=s.statusToChange)==null?void 0:y.currentStatus)),1),i(" menjadi "),e("span",ht,d(s.getStatusText((S=s.statusToChange)==null?void 0:S.newStatus)),1),i("? ")]),e("div",mt,[e("button",{onClick:o[15]||(o[15]=t=>s.showStatusModal=!1),class:"btn btn-ghost"},[_t,i(" Batal ")]),e("button",{onClick:o[16]||(o[16]=(...t)=>s.updateStatus&&s.updateStatus(...t)),class:"btn btn-primary"},[vt,i(" Ya, Ubah Status ")])])])])):c("",!0)]}),_:1})}const Bt=K(O,[["render",ft]]);export{Bt as default};
