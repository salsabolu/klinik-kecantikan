import{i as I,l as M,A as B,m as w,G as D,o as d,k as C,w as p,H as j,d as t,t as n,a as H,h as u,e as _,n as K,c as l,E as N,F as A}from"./app-807f60dc.js";import{A as E}from"./AppLayout-422bcc0a.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhFlask.vue-b6585dea.js";import"./PhSignOut.vue-98dc8f64.js";const V={components:{Head:I,Link:M,AppLayout:E},props:{transaction:Object},setup(r){const i=B(),a=w(()=>{const s=i.props.auth.user;return s.role==="admin"||s.role==="resepsionis"||r.transaction.user_id===s.id}),e=w(()=>{var s;return((s=r.transaction.transaction_details)==null?void 0:s.reduce((c,m)=>c+(m.quantity||0),0))||0});return{canEdit:a,totalQuantity:e,updateStatus:s=>{j.patch(route("transactions.update-status",r.transaction.id),{payment_status:s})},printInvoice:()=>{window.print()},formatDate:s=>new Date(s).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),formatDateTime:s=>new Date(s).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),formatCurrency:s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(s),formatMetode:s=>({cash:"Tunai",debit_card:"Kartu Debit",credit_card:"Kartu Kredit",transfer:"Transfer",other:"Lainnya",debit:"Kartu Debit",credit:"Kartu Kredit",tunai:"Tunai",kartu:"Kartu"})[s]||s,formatStatus:s=>({paid:"Lunas",pending:"Belum Lunas",partially_paid:"Sebagian Lunas",cancelled:"Dibatalkan",failed:"Gagal"})[s]||s,getStatusClass:s=>({paid:"badge-success",pending:"badge-warning",partially_paid:"badge-info",cancelled:"badge-error",failed:"badge-error"})[s]||"badge-neutral"}}},P={class:"py-12"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},q={class:"p-6 text-gray-900"},G={class:"flex justify-between items-center mb-6"},J={class:"text-2xl font-semibold"},O={class:"flex space-x-2"},R=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),U=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),W={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},X={class:"lg:col-span-2 space-y-6"},Y={class:"card bg-base-100 shadow"},Z={class:"card-body"},$=t("h3",{class:"card-title"},"Informasi Transaksi",-1),tt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},at=t("span",{class:"font-medium text-gray-600"},"ID Transaksi:",-1),st={class:"text-lg"},nt=t("span",{class:"font-medium text-gray-600"},"Tanggal Transaksi:",-1),et={class:"text-lg"},ot=t("span",{class:"font-medium text-gray-600"},"Total Harga:",-1),it={class:"text-2xl font-bold text-primary"},dt=t("span",{class:"font-medium text-gray-600"},"Status Pembayaran:",-1),ct={class:"mt-1"},lt=t("span",{class:"font-medium text-gray-600"},"Metode Pembayaran:",-1),rt={class:"mt-1"},_t={class:"badge badge-outline badge-lg"},ut=t("span",{class:"font-medium text-gray-600"},"Kasir:",-1),mt={class:"text-lg"},ht={class:"card bg-base-100 shadow"},gt={class:"card-body"},ft=t("h3",{class:"card-title"},"Informasi Pasien",-1),bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yt=t("span",{class:"font-medium text-gray-600"},"Nama Lengkap:",-1),pt={class:"text-lg"},vt=t("span",{class:"font-medium text-gray-600"},"Nomor Telepon:",-1),xt={class:"text-lg"},kt=t("span",{class:"font-medium text-gray-600"},"Email:",-1),wt={class:"text-lg"},Dt=t("span",{class:"font-medium text-gray-600"},"Tanggal Lahir:",-1),Ct={class:"text-lg"},St={class:"md:col-span-2"},Tt=t("span",{class:"font-medium text-gray-600"},"Alamat:",-1),Lt={class:"text-lg"},It={class:"card bg-base-100 shadow"},Mt={class:"card-body"},Bt=t("h3",{class:"card-title"},"Detail Item",-1),jt={class:"overflow-x-auto"},Ht={class:"table w-full"},Kt=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Item"),t("th",null,"Harga Satuan"),t("th",null,"Jumlah"),t("th",null,"Subtotal")])],-1),Nt={class:"font-medium"},At={class:"text-sm opacity-60"},Et={class:"font-medium"},zt={class:"font-bold"},Vt=t("td",{colspan:"4",class:"text-right"},"Total:",-1),Pt={class:"space-y-6"},Ft={class:"card bg-base-100 shadow"},Qt={class:"card-body"},qt=t("h3",{class:"card-title"},"Aksi Cepat",-1),Gt={class:"space-y-2"},Jt={key:0,class:"dropdown dropdown-end w-full"},Ot=t("label",{tabindex:"0",class:"btn btn-success w-full"},[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),u(" Update Status ")],-1),Rt={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"},Ut={key:0},Wt=t("span",{class:"badge badge-success badge-sm"},"Lunas",-1),Xt=[Wt],Yt={key:1},Zt=t("span",{class:"badge badge-warning badge-sm"},"Belum Lunas",-1),$t=[Zt],ta={key:2},aa=t("span",{class:"badge badge-info badge-sm"},"Sebagian Lunas",-1),sa=[aa],na={key:3},ea=t("span",{class:"badge badge-error badge-sm"},"Dibatalkan",-1),oa=[ea],ia=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),da={class:"card bg-base-100 shadow"},ca={class:"card-body"},la=t("h3",{class:"card-title"},"Statistik",-1),ra={class:"space-y-3"},_a={class:"flex justify-between"},ua=t("span",{class:"text-gray-600"},"Jumlah Item:",-1),ma={class:"font-medium"},ha={class:"flex justify-between"},ga=t("span",{class:"text-gray-600"},"Total Qty:",-1),fa={class:"font-medium"},ba=t("div",{class:"divider my-2"},null,-1),ya={class:"flex justify-between text-lg"},pa=t("span",{class:"font-medium"},"Total Bayar:",-1),va={class:"font-bold text-primary"},xa={class:"card bg-base-100 shadow"},ka={class:"card-body"},wa=t("h3",{class:"card-title"},"Informasi Sistem",-1),Da={class:"space-y-3 text-sm"},Ca=t("span",{class:"font-medium"},"Dibuat pada:",-1),Sa=t("br",null,null,-1),Ta=t("span",{class:"font-medium"},"Terakhir diperbarui:",-1),La=t("br",null,null,-1);function Ia(r,i,a,e,S,T){const h=D("Link"),v=D("AppLayout");return d(),C(v,{title:"Detail Transaksi"},{default:p(()=>{var g,f,b,y,s,c,m;return[t("div",P,[t("div",F,[t("div",Q,[t("div",q,[t("div",G,[t("h2",J,"Detail Transaksi #"+n(a.transaction.id),1),t("div",O,[H(h,{href:r.route("transactions.index"),class:"btn btn-outline"},{default:p(()=>[R,u(" Kembali ")]),_:1},8,["href"]),e.canEdit?(d(),C(h,{key:0,href:r.route("transactions.edit",a.transaction.id),class:"btn btn-warning"},{default:p(()=>[U,u(" Edit ")]),_:1},8,["href"])):_("",!0)])]),t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[$,t("div",tt,[t("div",null,[at,t("p",st,"#"+n(a.transaction.id),1)]),t("div",null,[nt,t("p",et,n(e.formatDate(a.transaction.tanggal_transaksi)),1)]),t("div",null,[ot,t("p",it,n(e.formatCurrency(a.transaction.total_amount)),1)]),t("div",null,[dt,t("div",ct,[t("div",{class:K(["badge badge-lg",e.getStatusClass(a.transaction.payment_status)])},n(e.formatStatus(a.transaction.payment_status)),3)])]),t("div",null,[lt,t("div",rt,[t("div",_t,n(e.formatMetode(a.transaction.payment_method)),1)])]),t("div",null,[ut,t("p",mt,n((g=a.transaction.user)==null?void 0:g.name),1)])])])]),t("div",ht,[t("div",gt,[ft,t("div",bt,[t("div",null,[yt,t("p",pt,n((f=a.transaction.patient)==null?void 0:f.nama_lengkap),1)]),t("div",null,[vt,t("p",xt,n((b=a.transaction.patient)==null?void 0:b.nomor_telepon),1)]),t("div",null,[kt,t("p",wt,n(((y=a.transaction.patient)==null?void 0:y.email)||"-"),1)]),t("div",null,[Dt,t("p",Ct,n(e.formatDate((s=a.transaction.patient)==null?void 0:s.tanggal_lahir)),1)]),t("div",St,[Tt,t("p",Lt,n(((c=a.transaction.patient)==null?void 0:c.alamat)||"-"),1)])])])]),t("div",It,[t("div",Mt,[Bt,t("div",jt,[t("table",Ht,[Kt,t("tbody",null,[(d(!0),l(A,null,N(a.transaction.transaction_details,(o,L)=>{var x,k;return d(),l("tr",{key:o.id},[t("td",null,n(L+1),1),t("td",null,[t("div",null,[t("div",Nt,n(o.item_name),1),t("div",At,n(((x=o.service)==null?void 0:x.nama_layanan)||((k=o.product)==null?void 0:k.nama_produk)||""),1)])]),t("td",null,n(e.formatCurrency(o.unit_price)),1),t("td",null,n(o.quantity),1),t("td",Et,n(e.formatCurrency(o.total_price)),1)])}),128))]),t("tfoot",null,[t("tr",zt,[Vt,t("td",null,n(e.formatCurrency(a.transaction.total_amount)),1)])])])])])])]),t("div",Pt,[t("div",Ft,[t("div",Qt,[qt,t("div",Gt,[a.transaction.payment_status!=="paid"?(d(),l("div",Jt,[Ot,t("ul",Rt,[a.transaction.payment_status!=="paid"?(d(),l("li",Ut,[t("a",{onClick:i[0]||(i[0]=o=>e.updateStatus("paid"))},Xt)])):_("",!0),a.transaction.payment_status!=="pending"?(d(),l("li",Yt,[t("a",{onClick:i[1]||(i[1]=o=>e.updateStatus("pending"))},$t)])):_("",!0),a.transaction.payment_status!=="partially_paid"?(d(),l("li",ta,[t("a",{onClick:i[2]||(i[2]=o=>e.updateStatus("partially_paid"))},sa)])):_("",!0),a.transaction.payment_status!=="cancelled"?(d(),l("li",na,[t("a",{onClick:i[3]||(i[3]=o=>e.updateStatus("cancelled"))},oa)])):_("",!0)])])):_("",!0),t("button",{onClick:i[4]||(i[4]=(...o)=>e.printInvoice&&e.printInvoice(...o)),class:"btn btn-info w-full"},[ia,u(" Cetak Invoice ")])])])]),t("div",da,[t("div",ca,[la,t("div",ra,[t("div",_a,[ua,t("span",ma,n((m=a.transaction.transaction_details)==null?void 0:m.length),1)]),t("div",ha,[ga,t("span",fa,n(e.totalQuantity),1)]),ba,t("div",ya,[pa,t("span",va,n(e.formatCurrency(a.transaction.total_amount)),1)])])])]),t("div",xa,[t("div",ka,[wa,t("div",Da,[t("div",null,[Ca,Sa,u(n(e.formatDateTime(a.transaction.created_at)),1)]),t("div",null,[Ta,La,u(n(e.formatDateTime(a.transaction.updated_at)),1)])])])])])])])])])])]}),_:1})}const Ea=z(V,[["render",Ia]]);export{Ea as default};
