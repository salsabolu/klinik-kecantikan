import{i as A,l as T,r as j,A as z,m as B,G as x,o as a,k as v,w as h,H as V,a as R,d as e,t as o,h as d,e as c,c as n,F as k,E as g}from"./app-807f60dc.js";import{A as F}from"./AppLayout-422bcc0a.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhFlask.vue-b6585dea.js";import"./PhSignOut.vue-98dc8f64.js";const P={components:{Head:A,Link:T,AppLayout:F},props:{medicalRecord:Object,patientHistory:Array},setup(l){const r=j(!1),s=z(),i=B(()=>{const t=s.props.auth.user;return t.role==="admin"||t.role==="dokter"&&l.medicalRecord.user_id===t.id}),D=B(()=>{const t=s.props.auth.user;return t.role==="admin"||t.role==="dokter"&&l.medicalRecord.user_id===t.id});return{showDeleteModal:r,canEdit:i,canDelete:D,confirmDelete:()=>{r.value=!0},deleteRecord:()=>{V.delete(route("medical-records.destroy",l.medicalRecord.id),{onSuccess:()=>{r.value=!1}})},printRecord:()=>{window.print()},formatAttachmentType:t=>({foto_sebelum:"Foto Sebelum Treatment",foto_sesudah:"Foto Sesudah Treatment",hasil_lab:"Hasil Lab/Tes",lainnya:"Lainnya"})[t]||"Unknown File Type",calculateAge:t=>{const _=new Date,u=new Date(t);let b=_.getFullYear()-u.getFullYear();const L=_.getMonth()-u.getMonth();return(L<0||L===0&&_.getDate()<u.getDate())&&b--,b},formatDate:t=>new Date(t).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),formatDateTime:t=>new Date(t).toLocaleString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),formatFileSize:t=>{if(t===0)return"0 Bytes";const _=1024,u=["Bytes","KB","MB","GB"],b=Math.floor(Math.log(t)/Math.log(_));return parseFloat((t/Math.pow(_,b)).toFixed(2))+" "+u[b]}}}},N={class:"py-12"},E={class:"max-w-6xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},O={class:"p-6 text-gray-900"},K={class:"flex justify-between items-center mb-6"},U={class:"text-2xl font-semibold"},Y={class:"flex space-x-2"},q=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),G=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),J={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Q={class:"lg:col-span-2 space-y-6"},W={class:"card bg-base-100 shadow-md"},X={class:"card-body"},Z=e("h3",{class:"card-title"},"Informasi Pasien",-1),$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ee=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Nama Lengkap")],-1),te={class:"text-lg"},se=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Umur")],-1),oe={class:"text-lg"},ae=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Jenis Kelamin")],-1),ne={class:"text-lg"},ie=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Nomor Telepon")],-1),de={class:"text-lg"},le={class:"md:col-span-2"},ce=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Alamat")],-1),re={class:"text-sm text-gray-600"},_e={class:"card bg-base-100 shadow-md"},me={class:"card-body"},he=e("h3",{class:"card-title"},"Detail Pemeriksaan",-1),ue={class:"space-y-4"},be=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Diagnosa")],-1),ve={class:"p-4 bg-base-200 rounded-lg"},ke=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Tindakan")],-1),ge={class:"p-4 bg-base-200 rounded-lg"},fe={key:0},pe=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Catatan Tambahan")],-1),ye={class:"p-4 bg-base-200 rounded-lg"},we={key:0,class:"card bg-base-100 shadow-md"},xe={class:"card-body"},Re=e("h3",{class:"card-title"},"Riwayat Alergi dan Obat-Obatan",-1),De={key:0,class:"mb-6"},Me=e("h4",{class:"font-semibold text-red-700 mb-3 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})]),d(" Riwayat Alergi ")],-1),Ce={class:"space-y-2"},Le=e("svg",{class:"w-4 h-4 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),Be={class:"text-red-800 font-medium"},He={key:1},Ae=e("h4",{class:"font-semibold text-blue-700 mb-3 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})]),d(" Riwayat Obat-Obatan ")],-1),Te={class:"space-y-2"},je={class:"flex items-start"},ze=e("svg",{class:"w-4 h-4 text-blue-500 mr-2 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})],-1),Ve={class:"flex-1"},Fe={class:"font-medium text-blue-800"},Se={class:"text-sm text-blue-600 mt-1"},Pe={key:0,class:"mr-3"},Ne=e("strong",null,"Dosis:",-1),Ee={key:1},Ie=e("strong",null,"Frekuensi:",-1),Oe={key:1,class:"card bg-base-100 shadow-md"},Ke={class:"card-body"},Ue=e("h3",{class:"card-title"},"Riwayat Rekam Medis Pasien",-1),Ye={class:"space-y-3"},qe={class:"flex justify-between items-start mb-2"},Ge={class:"font-medium"},Je={class:"text-sm text-gray-500"},Qe={class:"space-y-1 text-sm"},We=e("span",{class:"font-medium"},"Diagnosa:",-1),Xe=e("span",{class:"font-medium"},"Tindakan:",-1),Ze={key:0,class:"text-gray-600"},$e=e("span",{class:"font-medium"},"Catatan:",-1),et={class:"mt-2"},tt={class:"card bg-base-100 shadow-md"},st={class:"card-body"},ot=e("h3",{class:"card-title"},"Lampiran Dokumen",-1),at={key:0,class:"space-y-3"},nt={class:"flex items-center"},it=e("svg",{class:"w-8 h-8 text-blue-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),dt={class:"font-medium"},lt={class:"text-sm text-gray-500"},ct={class:"flex space-x-2"},rt=["href"],_t=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),mt=["href"],ht=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),ut={key:1,class:"text-center py-8 text-gray-500"},bt=e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),vt=e("p",null,"Tidak ada lampiran dokumen",-1),kt=[bt,vt],gt={class:"space-y-6"},ft={class:"card bg-primary text-primary-content shadow-md"},pt={class:"card-body"},yt=e("h3",{class:"card-title"},"Informasi Pemeriksaan",-1),wt={class:"space-y-3"},xt=e("div",{class:"text-sm opacity-70"},"Tanggal Pemeriksaan",-1),Rt={class:"text-lg font-bold"},Dt=e("div",{class:"text-sm opacity-70"},"Dokter/Terapis",-1),Mt={class:"text-lg font-semibold"},Ct={class:"card bg-base-100 shadow-md"},Lt={class:"card-body"},Bt=e("h3",{class:"card-title"},"Aksi Cepat",-1),Ht={class:"space-y-2"},At=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Tt=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),jt=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),zt=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Vt={class:"card bg-base-100 shadow-md"},Ft={class:"card-body"},St=e("h3",{class:"card-title"},"Informasi Sistem",-1),Pt={class:"space-y-2 text-sm"},Nt=e("span",{class:"font-medium"},"Dibuat:",-1),Et=e("br",null,null,-1),It=e("span",{class:"font-medium"},"Diperbarui:",-1),Ot=e("br",null,null,-1),Kt={key:0,class:"modal modal-open"},Ut={class:"modal-box"},Yt=e("h3",{class:"font-bold text-lg"},"Konfirmasi Hapus",-1),qt=e("p",{class:"py-4"},"Apakah Anda yakin ingin menghapus rekam medis ini? Tindakan ini tidak dapat dibatalkan.",-1),Gt={class:"modal-action"};function Jt(l,r,s,i,D,H){const M=x("Head"),m=x("Link"),C=x("AppLayout");return a(),v(C,{title:"Detail Rekam Medis"},{default:h(()=>{var f,p,y,w;return[R(M,{title:"Detail Rekam Medis"}),e("div",N,[e("div",E,[e("div",I,[e("div",O,[e("div",K,[e("h2",U,"Detail Rekam Medis #"+o(s.medicalRecord.id),1),e("div",Y,[R(m,{href:l.route("medical-records.index"),class:"btn btn-outline"},{default:h(()=>[q,d(" Kembali ")]),_:1},8,["href"]),i.canEdit?(a(),v(m,{key:0,href:l.route("medical-records.edit",s.medicalRecord.id),class:"btn btn-warning"},{default:h(()=>[G,d(" Edit ")]),_:1},8,["href"])):c("",!0)])]),e("div",J,[e("div",Q,[e("div",W,[e("div",X,[Z,e("div",$,[e("div",null,[ee,e("div",te,o(s.medicalRecord.patient.nama_lengkap),1)]),e("div",null,[se,e("div",oe,o(i.calculateAge(s.medicalRecord.patient.tanggal_lahir))+" tahun",1)]),e("div",null,[ae,e("div",ne,o(s.medicalRecord.patient.jenis_kelamin),1)]),e("div",null,[ie,e("div",de,o(s.medicalRecord.patient.nomor_telepon),1)]),e("div",le,[ce,e("div",re,o(s.medicalRecord.patient.alamat),1)])])])]),e("div",_e,[e("div",me,[he,e("div",ue,[e("div",null,[be,e("div",ve,o(s.medicalRecord.diagnosa),1)]),e("div",null,[ke,e("div",ge,o(s.medicalRecord.tindakan),1)]),s.medicalRecord.catatan?(a(),n("div",fe,[pe,e("div",ye,o(s.medicalRecord.catatan),1)])):c("",!0)])])]),((f=s.medicalRecord.allergies)==null?void 0:f.length)>0||((p=s.medicalRecord.medications)==null?void 0:p.length)>0?(a(),n("div",we,[e("div",xe,[Re,((y=s.medicalRecord.allergies)==null?void 0:y.length)>0?(a(),n("div",De,[Me,e("div",Ce,[(a(!0),n(k,null,g(s.medicalRecord.allergies,(t,_)=>(a(),n("div",{key:_,class:"flex items-center p-3 bg-red-50 border border-red-200 rounded-lg"},[Le,e("span",Be,o(t.name),1)]))),128))])])):c("",!0),((w=s.medicalRecord.medications)==null?void 0:w.length)>0?(a(),n("div",He,[Ae,e("div",Te,[(a(!0),n(k,null,g(s.medicalRecord.medications,(t,_)=>(a(),n("div",{key:_,class:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},[e("div",je,[ze,e("div",Ve,[e("div",Fe,o(t.name),1),e("div",Se,[t.dosage?(a(),n("span",Pe,[Ne,d(" "+o(t.dosage),1)])):c("",!0),t.frequency?(a(),n("span",Ee,[Ie,d(" "+o(t.frequency),1)])):c("",!0)])])])]))),128))])])):c("",!0)])])):c("",!0),s.patientHistory.length>0?(a(),n("div",Oe,[e("div",Ke,[Ue,e("div",Ye,[(a(!0),n(k,null,g(s.patientHistory,t=>(a(),n("div",{key:t.id,class:"p-4 border border-base-300 rounded-lg hover:bg-base-50 transition-colors"},[e("div",qe,[e("span",Ge,o(i.formatDate(t.tanggal_pemeriksaan)),1),e("span",Je,o(t.user.name),1)]),e("div",Qe,[e("div",null,[We,d(" "+o(t.diagnosa),1)]),e("div",null,[Xe,d(" "+o(t.tindakan),1)]),t.catatan?(a(),n("div",Ze,[$e,d(" "+o(t.catatan),1)])):c("",!0)]),e("div",et,[R(m,{href:l.route("medical-records.show",t.id),class:"text-primary hover:text-primary-focus text-sm"},{default:h(()=>[d(" Lihat Detail → ")]),_:2},1032,["href"])])]))),128))])])])):c("",!0),e("div",tt,[e("div",st,[ot,s.medicalRecord.attachments&&s.medicalRecord.attachments.length>0?(a(),n("div",at,[(a(!0),n(k,null,g(s.medicalRecord.attachments,t=>(a(),n("div",{key:t.id,class:"flex items-center justify-between p-3 bg-base-200 rounded-lg"},[e("div",nt,[it,e("div",null,[e("div",dt,o(t.filename),1),e("div",lt,o(i.formatFileSize(t.size))+" • "+o(i.formatAttachmentType(t.type)),1)])]),e("div",ct,[e("a",{href:l.route("attachments.view",t.id),target:"_blank",class:"btn btn-sm btn-outline btn-primary"},[_t,d(" Lihat ")],8,rt),e("a",{href:l.route("attachments.download",t.id),class:"btn btn-sm btn-outline btn-success"},[ht,d(" Unduh ")],8,mt)])]))),128))])):(a(),n("div",ut,kt))])])]),e("div",gt,[e("div",ft,[e("div",pt,[yt,e("div",wt,[e("div",null,[xt,e("div",Rt,o(i.formatDate(s.medicalRecord.tanggal_pemeriksaan)),1)]),e("div",null,[Dt,e("div",Mt,o(s.medicalRecord.user.name),1)])])])]),e("div",Ct,[e("div",Lt,[Bt,e("div",Ht,[l.$page.props.auth.user.role==="admin"||l.$page.props.auth.user.role==="dokter"?(a(),v(m,{key:0,href:l.route("medical-records.create",{patient_id:s.medicalRecord.patient.id}),class:"btn btn-success btn-block"},{default:h(()=>[At,d(" Rekam Medis Baru ")]),_:1},8,["href"])):c("",!0),l.$page.props.auth.user.role==="admin"||l.$page.props.auth.user.role==="resepsionis"?(a(),v(m,{key:1,href:l.route("patients.show",s.medicalRecord.patient.id),class:"btn btn-outline btn-block"},{default:h(()=>[Tt,d(" Lihat Profil Pasien ")]),_:1},8,["href"])):c("",!0),e("button",{onClick:r[0]||(r[0]=(...t)=>i.printRecord&&i.printRecord(...t)),class:"btn btn-info btn-block"},[jt,d(" Cetak ")]),i.canDelete?(a(),n("button",{key:2,onClick:r[1]||(r[1]=(...t)=>i.confirmDelete&&i.confirmDelete(...t)),class:"btn btn-error btn-block"},[zt,d(" Hapus ")])):c("",!0)])])]),e("div",Vt,[e("div",Ft,[St,e("div",Pt,[e("div",null,[Nt,Et,d(o(i.formatDateTime(s.medicalRecord.created_at)),1)]),e("div",null,[It,Ot,d(o(i.formatDateTime(s.medicalRecord.updated_at)),1)])])])])])])])])])]),i.showDeleteModal?(a(),n("div",Kt,[e("div",Ut,[Yt,qt,e("div",Gt,[e("button",{onClick:r[2]||(r[2]=t=>i.showDeleteModal=!1),class:"btn"},"Tidak"),e("button",{onClick:r[3]||(r[3]=(...t)=>i.deleteRecord&&i.deleteRecord(...t)),class:"btn btn-error"},"Ya, Hapus")])])])):c("",!0)]}),_:1})}const ss=S(P,[["render",Jt]]);export{ss as default};
