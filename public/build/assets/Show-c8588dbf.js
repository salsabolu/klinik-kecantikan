import{A as B,m as u,u as F,r as w,o as c,c as n,a as l,b as d,k as S,w as g,C as R,F as D,i as z,d as t,t as a,h as P,l as j,n as k,e as m,E as A}from"./app-807f60dc.js";import{A as L,b as E}from"./AppLayout-422bcc0a.js";import{_ as G}from"./PasienLayout-7750b425.js";import{G as V}from"./PhArrowLeft.vue-872f8b85.js";import{G as $}from"./PhNotePencil.vue-2f5d6dac.js";import"./PhCurrencyCircleDollar.vue-370c4c60.js";import"./PhClock.vue-0bcaea51.js";import"./PhFlask.vue-b6585dea.js";import"./PhSignOut.vue-98dc8f64.js";import"./_plugin-vue_export-helper-c27b6911.js";const O={class:"w-full mx-auto space-y-6"},K={class:"flex items-center justify-between"},U={class:"text-3xl font-semibold"},W=t("p",{class:"text-gray-600"},"Detail informasi produk",-1),q={class:"flex"},J={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},M={class:"p-6 lg:p-8"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},X={class:"space-y-6"},Y=t("p",{class:"text-lg font-medium mb-4"}," Informasi Layanan ",-1),Z={class:"space-y-4"},tt=t("label",{class:"block text-sm font-medium text-gray-600"}," Nama Produk ",-1),st={class:"mt-1 text-sm"},et=t("label",{class:"block text-sm font-medium text-gray-600"}," Deskripsi ",-1),at={class:"mt-1 text-sm"},ot=t("label",{class:"block text-sm font-medium text-gray-600"}," Harga ",-1),ct={class:"mt-1 text-lg font-semibold"},nt=t("label",{class:"block text-sm font-medium text-gray-600"}," Stok ",-1),dt={class:"mt-1 space-x-2"},it={key:0,class:"space-y-6"},lt=t("p",{class:"text-lg font-medium mb-4"}," Informasi Sistem ",-1),rt={class:"space-y-4"},ut=t("label",{class:"block text-sm font-medium text-gray-600"}," Dibuat Pada ",-1),mt={class:"mt-1 text-sm"},_t=t("label",{class:"block text-sm font-medium text-gray-600"}," Diperbarui Pada ",-1),ht={class:"mt-1 text-sm"},gt={class:"flex justify-end"},kt={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},ft={class:"p-6 lg:p-8"},pt=t("p",{class:"text-lg font-medium"},"Informasi Tambahan",-1),xt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},bt={class:"stat"},vt=t("div",{class:"stat-title"},"Status Ketersediaan",-1),yt={class:"stat-desc"},wt={class:"stat"},St=t("div",{class:"stat-title"},"Harga per Unit",-1),Dt={class:"stat-value text-lg text-primary"},Pt=t("div",{class:"stat-desc"},"Harga jual saat ini",-1),jt={class:"stat"},Ct=t("div",{class:"stat-title"},"Total Nilai Inventori",-1),Ht={class:"stat-value text-lg text-success"},It=t("div",{class:"stat-desc"},"Harga Ã— Stok",-1),Tt={key:1,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Nt={class:"p-6 lg:p-8"},Bt=t("p",{class:"text-lg font-medium"},"Riwayat Perubahan Stok",-1),Ft={key:0,class:"overflow-x-auto"},Rt={class:"table table-zebra"},zt=t("thead",null,[t("tr",null,[t("th",null,"Tanggal & Waktu"),t("th",null,"Stok Sebelum"),t("th",null,"Stok Sesudah"),t("th",null,"Perubahan"),t("th",null,"Diubah Oleh")])],-1),At={class:"font-mono text-sm"},Lt={class:"badge badge-outline"},Et={class:"badge badge-outline"},Gt={class:"flex items-center gap-1"},Vt={key:0,class:"text-success"},$t={key:1,class:"text-error"},Ot={key:2,class:"text-base-content/60"},Kt={class:"text-sm"},Ut={key:1,class:"text-center py-4"},Wt={class:"flex flex-col justify-center items-center text-center"},qt=t("p",{class:"text-lg font-medium text-gray-600"},"Belum ada riwayat perubahan stok",-1),Jt=t("p",{class:"text-base text-gray-600"},"Riwayat akan muncul setelah ada perubahan stok produk.",-1),is={__name:"Show",props:{product:Object,stockHistory:Array,auth:Object},setup(e){const _=e,{props:C}=B(),f=u(()=>{var s;return(s=C.auth)==null?void 0:s.user}),H=u(()=>{var s;return((s=f.value)==null?void 0:s.role)==="pasien"?G:L}),I=u(()=>{var s;return((s=f.value)==null?void 0:s.role)==="pasien"?"/products-catalog":"/products"}),{data:p,put:Mt,processing:Qt,errors:Xt}=F({new_stock:""});w({}),w({oldStock:0,newStock:0,difference:0}),u(()=>p.new_stock===""?0:parseInt(p.new_stock)-_.product.stok);const h=s=>new Intl.NumberFormat("id-ID").format(s),x=s=>new Date(s).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),r=s=>{var i,o;return(o=(i=_.auth)==null?void 0:i.user)!=null&&o.role?s.includes(_.auth.user.role):!1},N=s=>s===0?"badge-error":s<=10?"badge-warning":"badge-success",b=s=>s===0?"text-error":s<=10?"text-warning":"text-success",v=s=>s===0?"Habis":s<=10?"Stok Rendah":"Tersedia";return(s,i)=>(c(),n(D,null,[l(d(z),{title:"Detail Produk"}),(c(),S(R(H.value),null,{default:g(()=>[t("div",O,[t("div",K,[t("div",null,[t("h1",U,a(e.product.nama_produk),1),W]),t("div",q,[l(d(j),{href:I.value,class:"btn btn-outline"},{default:g(()=>[l(d(V),{size:20,color:"black",weight:"regular"}),P(" Kembali ")]),_:1},8,["href"])])]),t("div",J,[t("div",M,[t("div",Q,[t("div",X,[t("div",null,[Y,t("div",Z,[t("div",null,[tt,t("p",st,a(e.product.nama_produk),1)]),t("div",null,[et,t("p",at,a(e.product.deskripsi||"Tidak ada deskripsi"),1)]),t("div",null,[ot,t("p",ct," Rp "+a(h(e.product.harga)),1)]),t("div",null,[nt,t("div",dt,[t("div",{class:k(["badge",N(e.product.stok)])},a(e.product.stok)+" unit ",3),t("span",{class:k(["text-sm",b(e.product.stok)])},a(v(e.product.stok)),3)])])])])]),r(["pasien"])?m("",!0):(c(),n("div",it,[t("div",null,[lt,t("div",rt,[t("div",null,[ut,t("p",mt,a(x(e.product.created_at)),1)]),t("div",null,[_t,t("p",ht,a(x(e.product.updated_at)),1)])])])]))]),t("div",gt,[r(["admin","manajer_stok"])?(c(),S(d(j),{key:0,href:`/products/${e.product.id}/edit`,class:"btn btn-outline btn-primary"},{default:g(()=>[l(d($),{size:20,color:"black",weight:"regular"}),P(" Edit Produk ")]),_:1},8,["href"])):m("",!0)])])]),r(["admin","manajer_stok"])?(c(),n("div",kt,[t("div",ft,[pt,t("div",xt,[t("div",bt,[vt,t("div",{class:k(["stat-value text-sm",b(e.product.stok)])},a(v(e.product.stok)),3),t("div",yt,a(e.product.stok)+" unit tersedia",1)]),t("div",wt,[St,t("div",Dt,"Rp "+a(h(e.product.harga)),1),Pt]),t("div",jt,[Ct,t("div",Ht," Rp "+a(h(e.product.harga*e.product.stok)),1),It])])])])):m("",!0),r(["admin","manajer_stok"])?(c(),n("div",Tt,[t("div",Nt,[Bt,e.stockHistory&&e.stockHistory.length>0?(c(),n("div",Ft,[t("table",Rt,[zt,t("tbody",null,[(c(!0),n(D,null,A(e.stockHistory,o=>{var y;return c(),n("tr",{key:o.id},[t("td",null,[t("div",At,a(T(o.created_at)),1)]),t("td",null,[t("div",Lt,a(o.old_stock)+" unit ",1)]),t("td",null,[t("div",Et,a(o.new_stock)+" unit ",1)]),t("td",null,[t("div",Gt,[o.new_stock>o.old_stock?(c(),n("span",Vt," +"+a(o.new_stock-o.old_stock),1)):o.new_stock<o.old_stock?(c(),n("span",$t,a(o.new_stock-o.old_stock),1)):(c(),n("span",Ot,"0"))])]),t("td",null,[t("div",Kt,a(((y=o.user)==null?void 0:y.name)||"Sistem"),1)])])}),128))])])])):(c(),n("div",Ut,[t("div",Wt,[l(d(E),{size:80,color:"black",weight:"regular"}),qt,Jt])]))])])):m("",!0)])]),_:1}))],64))}};export{is as default};
